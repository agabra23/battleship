(()=>{"use strict";const e=function(e){let t=0;const n=()=>{let t=0;return e.forEach((e=>{t++})),t};return{getLength:n,isSunk:()=>t>=n(),hit:()=>{t++},getHits:()=>t,getPath:()=>e,resetHits:()=>{t=0},hits:t}},t=t=>{const n=[],o=function(t){const n=[...Array(10)].map((e=>Array(10).fill("none"))),o=[],r=[];let s=[];const a=e=>{e.getPath().forEach((t=>{const[o,r]=t;n[o][r]=e})),l(e)},l=e=>{s.push(e)};return{placeShip:a,boardArray:n,receiveAttack:e=>{const[t,s]=e;let a,l=!1;a=o.some((t=>{const[n,o]=t;return n===e[0]&&o===e[1]})),l=r.some((t=>{const[n,o]=t;return n===e[0]&&o===e[1]})),"none"!==n[t][s]&&!1===a?(n[t][s].hit(),o.push(e)):"none"===n[t][s]&&!1===l&&r.push(e)},hits:o,misses:r,addShip:l,resetGameboard:()=>{o=[],r=[],s=[]},initBoard:()=>{a(e([[1,4],[1,5]])),a(e([[6,4],[6,5],[6,6]])),a(e([[4,2],[5,2],[6,2],[7,2]])),a(e([[8,3],[8,4],[8,5],[8,6],[8,7]]))},isShip:e=>{const[t,o]=e;return"none"!==n[t][o]},getShip:e=>{const[t,o]=e;return n[t][o]},ships:s,type:t}}(t),r=e=>{n.push(e)};return{attempt:r,board:o,type:t,generateMove:()=>{const e=e=>Math.floor(Math.random()*e),t=e=>n.some((t=>{const[n,o]=t;return n===e[0]&&o===e[1]}));let o=[e(9),e(9)];for(;t(o);)o=[e(9),e(9)];return r(o),o}}},n=(()=>{const t=(e,t)=>{const[n,o]=e,r=document.getElementById(`${t.type} - ${n},${o}`),s=t.isShip(e);r.innerHTML=s?"Hit":"Miss"};let n=!0;const o=[2,3,4,5];let r=5;const a=()=>{const e=document.getElementById("chooseShip");o.find((e=>e===r-1))?(r--,e.textContent=`Choose ${r} Coordinates`):(document.querySelectorAll(".selectCell").forEach((e=>{e.style.pointerEvents="none"})),e.textContent='Click "Start Game" to Begin.')},l=e=>{const[t,n]=e,o=document.querySelectorAll(".selectCell");for(const e of o)if(parseInt(e.dataset.x)===t&&parseInt(e.dataset.y)===n)return e},c=()=>{n=!n};return{renderBoard:e=>{const n=document.getElementById("board");n.innerHTML='<div id="overlay"></div>';const o=document.createElement("h3");console.log(e),o.innerHTML=`${e.type}'s Turn`,n.appendChild(o),e.boardArray.forEach(((t,o)=>{const r=document.createElement("div");r.classList.add("rowDiv"),t.forEach(((t,n)=>{const a=document.createElement("div");a.classList.add("boardCell"),a.id=`${e.type} - ${o},${n}`,a.dataset.board=e.type,a.dataset.x=o,a.dataset.y=n,e===s.computerPlayer.board&&"none"!==t&&a.classList.add("selected"),"none"!==t&&(a.classList.add("shipCell"),t.isSunk()&&(a.style.backgroundColor="red")),a.addEventListener("click",(e=>{e.stopPropagation(),""===a.textContent&&s.moveEvent(a)})),r.appendChild(a)})),n.appendChild(r)})),e.misses.forEach((n=>{t(n,e)})),e.hits.forEach((n=>{t(n,e)}))},attempt:t,stopClicks:()=>{document.getElementById("overlay").style.pointerEvents="all"},startClicks:()=>{document.getElementById("overlay").style.pointerEvents="none"},styleSunk:e=>{document.querySelectorAll(".rowDiv").forEach((t=>{document.querySelectorAll(".boardCell").forEach((t=>{const[n,o]=[t.dataset.x,t.dataset.y];"User"===e?s.userPlayer.board.isShip([n,o])&&s.userPlayer.board.getShip([n,o]).isSunk()&&(t.style.backgroundColor="red"):s.computerPlayer.board.isShip([n,o])&&s.computerPlayer.board.getShip([n,o]).isSunk()&&(t.style.backgroundColor="red")}))}))},renderStart:()=>{document.getElementById("startScreen").style.display="flex",document.getElementById("board").style.display="none",document.getElementById("switchTurnBtn").style.display="none",(()=>{const t=document.getElementById("startScreen");t.style.display="flex";const o=document.createElement("button");o.textContent="Flip Ship Direction",o.id="flipBtn";const d=document.createElement("button");d.id="startBtn",d.textContent="Start Game";const i=document.createElement("h3");i.textContent=`Choose ${r} Coordinates`,i.id="chooseShip";for(let u=0;u<10;u++){const y=document.createElement("div");y.classList.add("rowDiv");for(let t=0;t<10;t++){const o=document.createElement("div");o.classList.add("selectCell"),y.appendChild(o),o.dataset.x=u,o.dataset.y=t,o.onmouseenter=e=>{o.style.backgroundColor="yellow";for(let e=1;e<r;e++){let o=l([u,t+e]);n&&(o=l([u+e,t])),void 0!==o&&(o.style.backgroundColor="yellow")}},o.onmouseout=e=>{o.style.backgroundColor="";for(let e=1;e<r;e++){let o=l([u,t+e]);n&&(o=l([u+e,t])),void 0!==o&&(o.style.backgroundColor="")}},o.onclick=c=>{let d=[[parseInt(o.dataset.x),parseInt(o.dataset.y)]];o.classList.add("selected");for(let e=1;e<r;e++){let o=l([u,t+e]);n&&(o=l([u+e,t])),o.classList.add("selected"),console.log(o.style.backgroundColor),d.push([parseInt(o.dataset.x),parseInt(o.dataset.y)])}s.computerPlayer.board.placeShip(e(d)),console.log("placed"),a()}}t.appendChild(y),t.appendChild(i),t.appendChild(o),t.appendChild(d),d.onclick=()=>{t.style.display="",document.getElementById("board").style.display="",document.getElementById("switchTurnBtn").style.display="",d.style.display="none"},o.onclick=c}})()},toggleTurnBtn:()=>{const e=document.getElementById("switchTurnBtn");e.disabled=!e.disabled}}})(),o=n,r=(()=>{const e=t("Computer"),n=t("User");let s=n;const a=e=>{e.board.ships.length>0&&e.board.ships.every((e=>e.isSunk()))&&alert(`${s.type} wins`)};return{initGame:()=>{n.board,e.board},switchTurn:()=>{console.log("start switch",r.currentPlayer.type),r.currentPlayer===n?r.currentPlayer=e:r.currentPlayer=n,console.log("end switch",r.currentPlayer.type)},computerPlayer:e,userPlayer:n,currentPlayer:s,checkLoss:a,moveEvent:t=>{o.stopClicks();const l="Computer"===t.dataset.board?e.board:n.board;l.receiveAttack([t.dataset.x,t.dataset.y]),o.attempt([t.dataset.x,t.dataset.y],l),o.styleSunk(l.type),a(s),r.switchTurn(),o.toggleTurnBtn()},computerMoveEvent:async()=>{o.stopClicks(),await(750,new Promise((e=>{setTimeout(e,750)}))),console.log("after 1 sec");const e=r.computerPlayer.generateMove(),t=r.computerPlayer.board;t.receiveAttack(e),o.attempt(e,t),o.styleSunk(t.type),r.checkLoss(r.currentPlayer),r.switchTurn(),o.toggleTurnBtn()}}})(),s=r;s.initGame();const a=document.getElementById("switchTurnBtn");o.renderBoard(s.currentPlayer.board),o.renderStart(),a.onclick=()=>{o.toggleTurnBtn(),o.renderBoard(s.currentPlayer.board),s.currentPlayer===s.computerPlayer?s.computerMoveEvent():o.startClicks()}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEIsRUFBR0csZ0JBRUgsRUFBR3ZDLFlBQVksRUFBSzJDLGNBQWN4RyxPQUU5QixFQUFLd0csZ0JBQWtCLEVBQUs3QixlQUM5QixFQUFLcUMsb0JBRUwsRUFBRy9CLGFBQ0wsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9TaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL0dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvVUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgbGV0IGhpdHMgPSAwO1xuXG4gIGNvbnN0IGdldEhpdHMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGhpdHM7XG4gIH07XG5cbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIGhpdHMrKztcbiAgfTtcblxuICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiB7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBwYXRoLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvdW50Kys7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50O1xuICB9O1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICByZXR1cm4gaGl0cyA+PSBnZXRMZW5ndGgoKTtcbiAgfTtcblxuICBjb25zdCBnZXRQYXRoID0gKCkgPT4ge1xuICAgIHJldHVybiBwYXRoO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0SGl0cyA9ICgpID0+IHtcbiAgICBoaXRzID0gMDtcbiAgfTtcblxuICByZXR1cm4geyBnZXRMZW5ndGgsIGlzU3VuaywgaGl0LCBnZXRIaXRzLCBnZXRQYXRoLCByZXNldEhpdHMsIGhpdHMgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBTaGlwO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9HYW1lYm9hcmRcIjtcblxuY29uc3QgUGxheWVyID0gKHR5cGUpID0+IHtcbiAgY29uc3QgYXR0ZW1wdHMgPSBbXTtcbiAgY29uc3QgdHVybiA9IGZhbHNlO1xuICBjb25zdCBib2FyZCA9IEdhbWVib2FyZCh0eXBlKTtcblxuICBjb25zdCBhdHRlbXB0ID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgYXR0ZW1wdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG5cbiAgY29uc3QgZ2VuZXJhdGVNb3ZlID0gKCkgPT4ge1xuICAgIGNvbnN0IGdldFJhbmRvbUludCA9IChtYXgpID0+IHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuICAgIH07XG5cbiAgICBjb25zdCBjaGVja0F0dGVtcHRlZCA9IChhdHRlbXB0KSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhdHRlbXB0cy5zb21lKChjb29yZGluYXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGU7XG5cbiAgICAgICAgcmV0dXJuIHggPT09IGF0dGVtcHRbMF0gJiYgeSA9PT0gYXR0ZW1wdFsxXTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICBsZXQgbW92ZSA9IFtnZXRSYW5kb21JbnQoOSksIGdldFJhbmRvbUludCg5KV07XG5cbiAgICB3aGlsZSAoY2hlY2tBdHRlbXB0ZWQobW92ZSkpIHtcbiAgICAgIG1vdmUgPSBbZ2V0UmFuZG9tSW50KDkpLCBnZXRSYW5kb21JbnQoOSldO1xuICAgIH1cblxuICAgIGF0dGVtcHQobW92ZSk7XG5cbiAgICByZXR1cm4gbW92ZTtcbiAgfTtcblxuICByZXR1cm4geyBhdHRlbXB0LCBib2FyZCwgdHlwZSwgZ2VuZXJhdGVNb3ZlIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7XG4iLCJpbXBvcnQgU2hpcCBmcm9tIFwiLi9TaGlwLmpzXCI7XG5cbmNvbnN0IEdhbWVib2FyZCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGNvbnN0IGJvYXJkQXJyYXkgPSBbLi4uQXJyYXkoMTApXS5tYXAoKGUpID0+IEFycmF5KDEwKS5maWxsKFwibm9uZVwiKSk7XG4gIGNvbnN0IGhpdHMgPSBbXTtcbiAgY29uc3QgbWlzc2VzID0gW107XG4gIGxldCBzaGlwcyA9IFtdO1xuXG4gIGNvbnN0IGluaXRCb2FyZCA9ICgpID0+IHtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzEsIDRdLFxuICAgICAgICBbMSwgNV0sXG4gICAgICBdKVxuICAgICk7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFs2LCA0XSxcbiAgICAgICAgWzYsIDVdLFxuICAgICAgICBbNiwgNl0sXG4gICAgICBdKVxuICAgICk7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFs0LCAyXSxcbiAgICAgICAgWzUsIDJdLFxuICAgICAgICBbNiwgMl0sXG4gICAgICAgIFs3LCAyXSxcbiAgICAgIF0pXG4gICAgKTtcblxuICAgIHBsYWNlU2hpcChcbiAgICAgIFNoaXAoW1xuICAgICAgICBbOCwgM10sXG4gICAgICAgIFs4LCA0XSxcbiAgICAgICAgWzgsIDVdLFxuICAgICAgICBbOCwgNl0sXG4gICAgICAgIFs4LCA3XSxcbiAgICAgIF0pXG4gICAgKTtcbiAgfTtcblxuICBjb25zdCByZXNldEdhbWVib2FyZCA9ICgpID0+IHtcbiAgICBoaXRzID0gW107XG4gICAgbWlzc2VzID0gW107XG4gICAgc2hpcHMgPSBbXTtcbiAgfTtcblxuICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcE9iamVjdCkgPT4ge1xuICAgIGNvbnN0IHBhdGggPSBzaGlwT2JqZWN0LmdldFBhdGgoKTtcbiAgICBwYXRoLmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcbiAgICAgIGJvYXJkQXJyYXlbeF1beV0gPSBzaGlwT2JqZWN0O1xuICAgIH0pO1xuICAgIGFkZFNoaXAoc2hpcE9iamVjdCk7XG4gIH07XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGVzO1xuXG4gICAgbGV0IGFscmVhZHlIaXQsXG4gICAgICBhbHJlYWR5TWlzcyA9IGZhbHNlO1xuXG4gICAgYWxyZWFkeUhpdCA9IGhpdHMuc29tZSgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgW3hJdGVtLCB5SXRlbV0gPSBpdGVtO1xuICAgICAgcmV0dXJuIHhJdGVtID09PSBjb29yZGluYXRlc1swXSAmJiB5SXRlbSA9PT0gY29vcmRpbmF0ZXNbMV07XG4gICAgfSk7XG4gICAgYWxyZWFkeU1pc3MgPSBtaXNzZXMuc29tZSgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgW3hJdGVtLCB5SXRlbV0gPSBpdGVtO1xuICAgICAgcmV0dXJuIHhJdGVtID09PSBjb29yZGluYXRlc1swXSAmJiB5SXRlbSA9PT0gY29vcmRpbmF0ZXNbMV07XG4gICAgfSk7XG5cbiAgICBpZiAoYm9hcmRBcnJheVt4XVt5XSAhPT0gXCJub25lXCIgJiYgYWxyZWFkeUhpdCA9PT0gZmFsc2UpIHtcbiAgICAgIGJvYXJkQXJyYXlbeF1beV0uaGl0KCk7XG4gICAgICBoaXRzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgIH0gZWxzZSBpZiAoYm9hcmRBcnJheVt4XVt5XSA9PT0gXCJub25lXCIgJiYgYWxyZWFkeU1pc3MgPT09IGZhbHNlKSB7XG4gICAgICBtaXNzZXMucHVzaChjb29yZGluYXRlcyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGFkZFNoaXAgPSAoc2hpcCkgPT4ge1xuICAgIHNoaXBzLnB1c2goc2hpcCk7XG4gIH07XG5cbiAgY29uc3QgaXNTaGlwID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG5cbiAgICByZXR1cm4gYm9hcmRBcnJheVt4XVt5XSAhPT0gXCJub25lXCI7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2hpcCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGVzO1xuXG4gICAgcmV0dXJuIGJvYXJkQXJyYXlbeF1beV07XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBwbGFjZVNoaXAsXG4gICAgYm9hcmRBcnJheSxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGhpdHMsXG4gICAgbWlzc2VzLFxuICAgIGFkZFNoaXAsXG4gICAgcmVzZXRHYW1lYm9hcmQsXG4gICAgaW5pdEJvYXJkLFxuICAgIGlzU2hpcCxcbiAgICBnZXRTaGlwLFxuICAgIHNoaXBzLFxuICAgIHR5cGUsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lYm9hcmQ7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL1NoaXBcIjtcbmltcG9ydCBnYW1lIGZyb20gXCIuL2dhbWVcIjtcblxuY29uc3QgVUkgPSAoKCkgPT4ge1xuICBjb25zdCByZW5kZXJTdGFydCA9ICgpID0+IHtcbiAgICBjb25zdCBzdGFydFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhcnRTY3JlZW5cIik7XG4gICAgc3RhcnRTY3JlZW4uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvYXJkXCIpO1xuICAgIGJvYXJkLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGNvbnN0IG5leHRUdXJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzd2l0Y2hUdXJuQnRuXCIpO1xuICAgIG5leHRUdXJuQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGdlbmVyYXRlR3JpZCgpO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0RXZlbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cbiAgICBjb25zdCBib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9hcmRcIik7XG4gICAgYm9hcmQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cbiAgICBjb25zdCBuZXh0VHVybkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3dpdGNoVHVybkJ0blwiKTtcbiAgICBuZXh0VHVybkJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgfTtcblxuICBjb25zdCByZW5kZXJCb2FyZCA9IChwbGF5ZXJCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib2FyZFwiKTtcbiAgICBib2FyZC5pbm5lckhUTUwgPSBgPGRpdiBpZD1cIm92ZXJsYXlcIj48L2Rpdj5gO1xuXG4gICAgY29uc3QgcGxheWVyVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgY29uc29sZS5sb2cocGxheWVyQm9hcmQpO1xuICAgIHBsYXllclRpdGxlLmlubmVySFRNTCA9IGAke3BsYXllckJvYXJkLnR5cGV9J3MgVHVybmA7XG5cbiAgICBib2FyZC5hcHBlbmRDaGlsZChwbGF5ZXJUaXRsZSk7XG5cbiAgICBwbGF5ZXJCb2FyZC5ib2FyZEFycmF5LmZvckVhY2goKHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHJvd0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICByb3dEaXYuY2xhc3NMaXN0LmFkZChcInJvd0RpdlwiKTtcblxuICAgICAgcm93LmZvckVhY2goKGl0ZW0sIGNlbGxJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwiYm9hcmRDZWxsXCIpO1xuICAgICAgICBjZWxsLmlkID0gYCR7cGxheWVyQm9hcmQudHlwZX0gLSAke3Jvd0luZGV4fSwke2NlbGxJbmRleH1gO1xuICAgICAgICBjZWxsLmRhdGFzZXQuYm9hcmQgPSBwbGF5ZXJCb2FyZC50eXBlO1xuICAgICAgICBjZWxsLmRhdGFzZXQueCA9IHJvd0luZGV4O1xuICAgICAgICBjZWxsLmRhdGFzZXQueSA9IGNlbGxJbmRleDtcblxuICAgICAgICBpZiAocGxheWVyQm9hcmQgPT09IGdhbWUuY29tcHV0ZXJQbGF5ZXIuYm9hcmQgJiYgaXRlbSAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpdGVtICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcInNoaXBDZWxsXCIpO1xuXG4gICAgICAgICAgaWYgKGl0ZW0uaXNTdW5rKCkpIHtcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKGNlbGwudGV4dENvbnRlbnQgPT09IFwiXCIpIGdhbWUubW92ZUV2ZW50KGNlbGwpO1xuICAgICAgICB9KTtcblxuICAgICAgICByb3dEaXYuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICB9KTtcblxuICAgICAgYm9hcmQuYXBwZW5kQ2hpbGQocm93RGl2KTtcbiAgICB9KTtcblxuICAgIHBsYXllckJvYXJkLm1pc3Nlcy5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgYXR0ZW1wdChjb29yZGluYXRlcywgcGxheWVyQm9hcmQpO1xuICAgIH0pO1xuICAgIHBsYXllckJvYXJkLmhpdHMuZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIGF0dGVtcHQoY29vcmRpbmF0ZXMsIHBsYXllckJvYXJkKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBhdHRlbXB0ID0gKGNvb3JkaW5hdGVzLCBnYW1lYm9hcmQpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7Z2FtZWJvYXJkLnR5cGV9IC0gJHt4fSwke3l9YCk7XG4gICAgY29uc3QgaXNTaGlwID0gZ2FtZWJvYXJkLmlzU2hpcChjb29yZGluYXRlcyk7XG5cbiAgICBpZiAoaXNTaGlwKSB7XG4gICAgICB0YXJnZXRDZWxsLmlubmVySFRNTCA9IFwiSGl0XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldENlbGwuaW5uZXJIVE1MID0gXCJNaXNzXCI7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0b3BDbGlja3MgPSAoKSA9PiB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmxheVwiKTtcblxuICAgIG92ZXJsYXkuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYWxsXCI7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRDbGlja3MgPSAoKSA9PiB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmxheVwiKTtcblxuICAgIG92ZXJsYXkuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICB9O1xuXG4gIGNvbnN0IHN0eWxlU3VuayA9IChib2FyZFR5cGUpID0+IHtcbiAgICBjb25zdCByb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5yb3dEaXZcIik7XG4gICAgcm93cy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ib2FyZENlbGxcIik7XG4gICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IFt4LCB5XSA9IFtjZWxsLmRhdGFzZXQueCwgY2VsbC5kYXRhc2V0LnldO1xuXG4gICAgICAgIGlmIChib2FyZFR5cGUgPT09IFwiVXNlclwiKSB7XG4gICAgICAgICAgaWYgKGdhbWUudXNlclBsYXllci5ib2FyZC5pc1NoaXAoW3gsIHldKSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IGdhbWUudXNlclBsYXllci5ib2FyZC5nZXRTaGlwKFt4LCB5XSk7XG4gICAgICAgICAgICBpZiAoc2hpcC5pc1N1bmsoKSkgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZ2FtZS5jb21wdXRlclBsYXllci5ib2FyZC5pc1NoaXAoW3gsIHldKSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IGdhbWUuY29tcHV0ZXJQbGF5ZXIuYm9hcmQuZ2V0U2hpcChbeCwgeV0pO1xuICAgICAgICAgICAgaWYgKHNoaXAuaXNTdW5rKCkpIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVR1cm5CdG4gPSAoKSA9PiB7XG4gICAgY29uc3Qgc3dpdGNoVHVybkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3dpdGNoVHVybkJ0blwiKTtcbiAgICBzd2l0Y2hUdXJuQnRuLmRpc2FibGVkID0gIXN3aXRjaFR1cm5CdG4uZGlzYWJsZWQ7XG4gIH07XG5cbiAgLy8gQ2hvb3NlIFNoaXAgTG9jYXRpb25zXG5cbiAgbGV0IGlzVmVydGljYWwgPSB0cnVlO1xuICBjb25zdCBzaGlwTGVuZ3RocyA9IFsyLCAzLCA0LCA1XTtcbiAgbGV0IGN1cnJlbnRTaGlwTGVuZ3RoID0gNTtcblxuICBjb25zdCBnZW5lcmF0ZUdyaWQgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0U2NyZWVuXCIpO1xuICAgIHN0YXJ0U2NyZWVuLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcblxuICAgIGNvbnN0IGZsaXBCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGZsaXBCdXR0b24udGV4dENvbnRlbnQgPSBcIkZsaXAgU2hpcCBEaXJlY3Rpb25cIjtcbiAgICBmbGlwQnV0dG9uLmlkID0gXCJmbGlwQnRuXCI7XG5cbiAgICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgc3RhcnRCdXR0b24uaWQgPSBcInN0YXJ0QnRuXCI7XG4gICAgc3RhcnRCdXR0b24udGV4dENvbnRlbnQgPSBcIlN0YXJ0IEdhbWVcIjtcblxuICAgIGNvbnN0IGNob29zZVNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgY2hvb3NlU2hpcC50ZXh0Q29udGVudCA9IGBDaG9vc2UgJHtjdXJyZW50U2hpcExlbmd0aH0gQ29vcmRpbmF0ZXNgO1xuICAgIGNob29zZVNoaXAuaWQgPSBcImNob29zZVNoaXBcIjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgY29uc3Qgcm93RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHJvd0Rpdi5jbGFzc0xpc3QuYWRkKFwicm93RGl2XCIpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcInNlbGVjdENlbGxcIik7XG4gICAgICAgIHJvd0Rpdi5hcHBlbmRDaGlsZChjZWxsKTtcblxuICAgICAgICBjZWxsLmRhdGFzZXQueCA9IGk7XG4gICAgICAgIGNlbGwuZGF0YXNldC55ID0gajtcblxuICAgICAgICBjZWxsLm9ubW91c2VlbnRlciA9IChlKSA9PiB7XG4gICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiO1xuICAgICAgICAgIGZvciAobGV0IGsgPSAxOyBrIDwgY3VycmVudFNoaXBMZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgbGV0IG5ld0NlbGwgPSBnZXRTZWxlY3RDZWxsKFtpLCBqICsga10pO1xuXG4gICAgICAgICAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICBuZXdDZWxsID0gZ2V0U2VsZWN0Q2VsbChbaSArIGssIGpdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld0NlbGwgIT09IHVuZGVmaW5lZCkgbmV3Q2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjZWxsLm9ubW91c2VvdXQgPSAoZSkgPT4ge1xuICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcbiAgICAgICAgICBmb3IgKGxldCBrID0gMTsgayA8IGN1cnJlbnRTaGlwTGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGxldCBuZXdDZWxsID0gZ2V0U2VsZWN0Q2VsbChbaSwgaiArIGtdKTtcblxuICAgICAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgbmV3Q2VsbCA9IGdldFNlbGVjdENlbGwoW2kgKyBrLCBqXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdDZWxsICE9PSB1bmRlZmluZWQpIG5ld0NlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY2VsbC5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICBsZXQgc2hpcENvb3JkaW5hdGVzID0gW1xuICAgICAgICAgICAgW3BhcnNlSW50KGNlbGwuZGF0YXNldC54KSwgcGFyc2VJbnQoY2VsbC5kYXRhc2V0LnkpXSxcbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG5cbiAgICAgICAgICBmb3IgKGxldCBrID0gMTsgayA8IGN1cnJlbnRTaGlwTGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGxldCBuZXdDZWxsID0gZ2V0U2VsZWN0Q2VsbChbaSwgaiArIGtdKTtcblxuICAgICAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgbmV3Q2VsbCA9IGdldFNlbGVjdENlbGwoW2kgKyBrLCBqXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld0NlbGwuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3Q2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgc2hpcENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgICAgICBwYXJzZUludChuZXdDZWxsLmRhdGFzZXQueCksXG4gICAgICAgICAgICAgIHBhcnNlSW50KG5ld0NlbGwuZGF0YXNldC55KSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGdhbWUuY29tcHV0ZXJQbGF5ZXIuYm9hcmQucGxhY2VTaGlwKFNoaXAoc2hpcENvb3JkaW5hdGVzKSk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhcInBsYWNlZFwiKTtcbiAgICAgICAgICBuZXh0U2hpcCgpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBzdGFydFNjcmVlbi5hcHBlbmRDaGlsZChyb3dEaXYpO1xuICAgICAgc3RhcnRTY3JlZW4uYXBwZW5kQ2hpbGQoY2hvb3NlU2hpcCk7XG4gICAgICBzdGFydFNjcmVlbi5hcHBlbmRDaGlsZChmbGlwQnV0dG9uKTtcbiAgICAgIHN0YXJ0U2NyZWVuLmFwcGVuZENoaWxkKHN0YXJ0QnV0dG9uKTtcblxuICAgICAgc3RhcnRCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgc3RhcnRFdmVudChzdGFydFNjcmVlbik7XG4gICAgICAgIHN0YXJ0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH07XG5cbiAgICAgIGZsaXBCdXR0b24ub25jbGljayA9IGZsaXA7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG5leHRTaGlwID0gKCkgPT4ge1xuICAgIGNvbnN0IGNob29zZVNoaXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNob29zZVNoaXBcIik7XG5cbiAgICBpZiAoXG4gICAgICBzaGlwTGVuZ3Rocy5maW5kKChsZW5ndGgpID0+IHtcbiAgICAgICAgcmV0dXJuIGxlbmd0aCA9PT0gY3VycmVudFNoaXBMZW5ndGggLSAxO1xuICAgICAgfSlcbiAgICApIHtcbiAgICAgIGN1cnJlbnRTaGlwTGVuZ3RoLS07XG4gICAgICBjaG9vc2VTaGlwLnRleHRDb250ZW50ID0gYENob29zZSAke2N1cnJlbnRTaGlwTGVuZ3RofSBDb29yZGluYXRlc2A7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RDZWxsXCIpO1xuICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBjZWxsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgIH0pO1xuICAgICAgY2hvb3NlU2hpcC50ZXh0Q29udGVudCA9IGBDbGljayBcIlN0YXJ0IEdhbWVcIiB0byBCZWdpbi5gO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRTZWxlY3RDZWxsID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG5cbiAgICBjb25zdCBzZWxlY3RDZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VsZWN0Q2VsbFwiKTtcbiAgICBmb3IgKGNvbnN0IHNlbGVjdENlbGwgb2Ygc2VsZWN0Q2VsbHMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFyc2VJbnQoc2VsZWN0Q2VsbC5kYXRhc2V0LngpID09PSB4ICYmXG4gICAgICAgIHBhcnNlSW50KHNlbGVjdENlbGwuZGF0YXNldC55KSA9PT0geVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RDZWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBmbGlwID0gKCkgPT4ge1xuICAgIGlzVmVydGljYWwgPSAhaXNWZXJ0aWNhbDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHJlbmRlckJvYXJkLFxuICAgIGF0dGVtcHQsXG4gICAgc3RvcENsaWNrcyxcbiAgICBzdGFydENsaWNrcyxcbiAgICBzdHlsZVN1bmssXG4gICAgcmVuZGVyU3RhcnQsXG4gICAgdG9nZ2xlVHVybkJ0bixcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFVJO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9HYW1lYm9hcmRcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL1NoaXBcIjtcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vUGxheWVyXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4vVUlcIjtcblxuY29uc3QgZ2FtZSA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gUGxheWVyKFwiQ29tcHV0ZXJcIik7XG4gIGNvbnN0IHVzZXJQbGF5ZXIgPSBQbGF5ZXIoXCJVc2VyXCIpO1xuXG4gIGxldCBjdXJyZW50UGxheWVyID0gdXNlclBsYXllcjtcblxuICBjb25zdCBpbml0R2FtZSA9ICgpID0+IHtcbiAgICBjb25zdCB1c2VyQm9hcmQgPSB1c2VyUGxheWVyLmJvYXJkO1xuICAgIGNvbnN0IGNvbXB1dGVyQm9hcmQgPSBjb21wdXRlclBsYXllci5ib2FyZDtcbiAgICAvLyBjb21wdXRlckJvYXJkLmluaXRCb2FyZCgpO1xuICAgIC8vIHVzZXJCb2FyZC5pbml0Qm9hcmQoKTtcbiAgfTtcblxuICBjb25zdCBzd2l0Y2hUdXJuID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwic3RhcnQgc3dpdGNoXCIsIGdhbWUuY3VycmVudFBsYXllci50eXBlKTtcbiAgICBpZiAoZ2FtZS5jdXJyZW50UGxheWVyID09PSB1c2VyUGxheWVyKSB7XG4gICAgICBnYW1lLmN1cnJlbnRQbGF5ZXIgPSBjb21wdXRlclBsYXllcjtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZS5jdXJyZW50UGxheWVyID0gdXNlclBsYXllcjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcImVuZCBzd2l0Y2hcIiwgZ2FtZS5jdXJyZW50UGxheWVyLnR5cGUpO1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrTG9zcyA9IChwbGF5ZXIpID0+IHtcbiAgICBjb25zdCBhbGxTdW5rID1cbiAgICAgIHBsYXllci5ib2FyZC5zaGlwcy5sZW5ndGggPiAwICYmXG4gICAgICBwbGF5ZXIuYm9hcmQuc2hpcHMuZXZlcnkoKHNoaXApID0+IHtcbiAgICAgICAgcmV0dXJuIHNoaXAuaXNTdW5rKCk7XG4gICAgICB9KTtcblxuICAgIGlmIChhbGxTdW5rKSBhbGVydChgJHtjdXJyZW50UGxheWVyLnR5cGV9IHdpbnNgKTtcbiAgfTtcblxuICBjb25zdCBtb3ZlRXZlbnQgPSAoY2VsbCkgPT4ge1xuICAgIFVJLnN0b3BDbGlja3MoKTtcbiAgICBjb25zdCBjZWxsQm9hcmQgPVxuICAgICAgY2VsbC5kYXRhc2V0LmJvYXJkID09PSBcIkNvbXB1dGVyXCJcbiAgICAgICAgPyBjb21wdXRlclBsYXllci5ib2FyZFxuICAgICAgICA6IHVzZXJQbGF5ZXIuYm9hcmQ7XG5cbiAgICBjZWxsQm9hcmQucmVjZWl2ZUF0dGFjayhbY2VsbC5kYXRhc2V0LngsIGNlbGwuZGF0YXNldC55XSk7XG4gICAgVUkuYXR0ZW1wdChbY2VsbC5kYXRhc2V0LngsIGNlbGwuZGF0YXNldC55XSwgY2VsbEJvYXJkKTtcbiAgICBVSS5zdHlsZVN1bmsoY2VsbEJvYXJkLnR5cGUpO1xuICAgIGNoZWNrTG9zcyhjdXJyZW50UGxheWVyKTtcbiAgICBnYW1lLnN3aXRjaFR1cm4oKTtcbiAgICBVSS50b2dnbGVUdXJuQnRuKCk7XG4gIH07XG5cbiAgY29uc3QgY29tcHV0ZXJNb3ZlRXZlbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgVUkuc3RvcENsaWNrcygpO1xuXG4gICAgY29uc3QgZGVsYXkgPSAobWlsbGlzZWNvbmRzKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtaWxsaXNlY29uZHMpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGF3YWl0IGRlbGF5KDc1MCk7XG5cbiAgICBjb25zb2xlLmxvZyhcImFmdGVyIDEgc2VjXCIpO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gZ2FtZS5jb21wdXRlclBsYXllci5nZW5lcmF0ZU1vdmUoKTtcblxuICAgIGNvbnN0IGNlbGxCb2FyZCA9IGdhbWUuY29tcHV0ZXJQbGF5ZXIuYm9hcmQ7XG4gICAgY2VsbEJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpO1xuICAgIFVJLmF0dGVtcHQoY29vcmRpbmF0ZXMsIGNlbGxCb2FyZCk7XG4gICAgVUkuc3R5bGVTdW5rKGNlbGxCb2FyZC50eXBlKTtcbiAgICBnYW1lLmNoZWNrTG9zcyhnYW1lLmN1cnJlbnRQbGF5ZXIpO1xuICAgIGdhbWUuc3dpdGNoVHVybigpO1xuICAgIFVJLnRvZ2dsZVR1cm5CdG4oKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXRHYW1lLFxuICAgIHN3aXRjaFR1cm4sXG4gICAgY29tcHV0ZXJQbGF5ZXIsXG4gICAgdXNlclBsYXllcixcbiAgICBjdXJyZW50UGxheWVyLFxuICAgIGNoZWNrTG9zcyxcbiAgICBtb3ZlRXZlbnQsXG4gICAgY29tcHV0ZXJNb3ZlRXZlbnQsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9tb2R1bGVzL0dhbWVib2FyZC5qc1wiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vbW9kdWxlcy9TaGlwLmpzXCI7XG5pbXBvcnQgZ2FtZSBmcm9tIFwiLi9tb2R1bGVzL2dhbWUuanNcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi9tb2R1bGVzL1VJLmpzXCI7XG5cbmdhbWUuaW5pdEdhbWUoKTtcbmNvbnN0IHN3aXRjaFR1cm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN3aXRjaFR1cm5CdG5cIik7XG5VSS5yZW5kZXJCb2FyZChnYW1lLmN1cnJlbnRQbGF5ZXIuYm9hcmQpO1xuVUkucmVuZGVyU3RhcnQoKTtcblxuc3dpdGNoVHVybkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICBVSS50b2dnbGVUdXJuQnRuKCk7XG5cbiAgVUkucmVuZGVyQm9hcmQoZ2FtZS5jdXJyZW50UGxheWVyLmJvYXJkKTtcblxuICBpZiAoZ2FtZS5jdXJyZW50UGxheWVyID09PSBnYW1lLmNvbXB1dGVyUGxheWVyKSB7XG4gICAgZ2FtZS5jb21wdXRlck1vdmVFdmVudCgpO1xuICB9IGVsc2Uge1xuICAgIFVJLnN0YXJ0Q2xpY2tzKCk7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsicGF0aCIsImhpdHMiLCJnZXRMZW5ndGgiLCJjb3VudCIsImZvckVhY2giLCJlbGVtZW50IiwiaXNTdW5rIiwiaGl0IiwiZ2V0SGl0cyIsImdldFBhdGgiLCJyZXNldEhpdHMiLCJ0eXBlIiwiYXR0ZW1wdHMiLCJib2FyZCIsImJvYXJkQXJyYXkiLCJBcnJheSIsIm1hcCIsImUiLCJmaWxsIiwibWlzc2VzIiwic2hpcHMiLCJwbGFjZVNoaXAiLCJzaGlwT2JqZWN0IiwiY29vcmRpbmF0ZXMiLCJ4IiwieSIsImFkZFNoaXAiLCJzaGlwIiwicHVzaCIsInJlY2VpdmVBdHRhY2siLCJhbHJlYWR5SGl0IiwiYWxyZWFkeU1pc3MiLCJzb21lIiwiaXRlbSIsInhJdGVtIiwieUl0ZW0iLCJyZXNldEdhbWVib2FyZCIsImluaXRCb2FyZCIsImlzU2hpcCIsImdldFNoaXAiLCJhdHRlbXB0IiwiZ2VuZXJhdGVNb3ZlIiwiZ2V0UmFuZG9tSW50IiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2hlY2tBdHRlbXB0ZWQiLCJjb29yZGluYXRlIiwibW92ZSIsIlVJIiwiZ2FtZWJvYXJkIiwidGFyZ2V0Q2VsbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJpc1ZlcnRpY2FsIiwic2hpcExlbmd0aHMiLCJjdXJyZW50U2hpcExlbmd0aCIsIm5leHRTaGlwIiwiY2hvb3NlU2hpcCIsImZpbmQiLCJsZW5ndGgiLCJ0ZXh0Q29udGVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjZWxsIiwic3R5bGUiLCJwb2ludGVyRXZlbnRzIiwiZ2V0U2VsZWN0Q2VsbCIsInNlbGVjdENlbGxzIiwic2VsZWN0Q2VsbCIsInBhcnNlSW50IiwiZGF0YXNldCIsImZsaXAiLCJyZW5kZXJCb2FyZCIsInBsYXllckJvYXJkIiwicGxheWVyVGl0bGUiLCJjcmVhdGVFbGVtZW50IiwiY29uc29sZSIsImxvZyIsImFwcGVuZENoaWxkIiwicm93Iiwicm93SW5kZXgiLCJyb3dEaXYiLCJjbGFzc0xpc3QiLCJhZGQiLCJjZWxsSW5kZXgiLCJpZCIsImNvbXB1dGVyUGxheWVyIiwiYmFja2dyb3VuZENvbG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0b3BQcm9wYWdhdGlvbiIsIm1vdmVFdmVudCIsInN0b3BDbGlja3MiLCJzdGFydENsaWNrcyIsInN0eWxlU3VuayIsImJvYXJkVHlwZSIsInVzZXJQbGF5ZXIiLCJyZW5kZXJTdGFydCIsImRpc3BsYXkiLCJzdGFydFNjcmVlbiIsImZsaXBCdXR0b24iLCJzdGFydEJ1dHRvbiIsImkiLCJqIiwib25tb3VzZWVudGVyIiwiayIsIm5ld0NlbGwiLCJ1bmRlZmluZWQiLCJvbm1vdXNlb3V0Iiwib25jbGljayIsInNoaXBDb29yZGluYXRlcyIsImdlbmVyYXRlR3JpZCIsInRvZ2dsZVR1cm5CdG4iLCJzd2l0Y2hUdXJuQnRuIiwiZGlzYWJsZWQiLCJnYW1lIiwiY3VycmVudFBsYXllciIsImNoZWNrTG9zcyIsInBsYXllciIsImV2ZXJ5IiwiYWxlcnQiLCJpbml0R2FtZSIsInN3aXRjaFR1cm4iLCJjZWxsQm9hcmQiLCJjb21wdXRlck1vdmVFdmVudCIsImFzeW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==