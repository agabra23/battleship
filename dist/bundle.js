(()=>{"use strict";const e=function(e){let t=0;const n=()=>{let t=0;return e.forEach((e=>{t++})),t};return{getLength:n,isSunk:()=>t>=n(),hit:()=>{t++},getHits:()=>t,getPath:()=>e,resetHits:()=>{t=0},hits:t}},t=t=>{const n=[],o=function(t){const n=[...Array(10)].map((e=>Array(10).fill("none"))),o=[],r=[];let s=[];const a=e=>{e.getPath().forEach((t=>{const[o,r]=t;n[o][r]=e})),l(e)},l=e=>{s.push(e)};return{placeShip:a,boardArray:n,receiveAttack:e=>{const[t,s]=e;let a,l=!1;a=o.some((t=>{const[n,o]=t;return n===e[0]&&o===e[1]})),l=r.some((t=>{const[n,o]=t;return n===e[0]&&o===e[1]})),"none"!==n[t][s]&&!1===a?(n[t][s].hit(),o.push(e)):"none"===n[t][s]&&!1===l&&r.push(e)},hits:o,misses:r,addShip:l,resetGameboard:()=>{o=[],r=[],s=[]},initBoard:()=>{a(e([[1,4],[1,5]])),a(e([[6,4],[6,5],[6,6]])),a(e([[4,2],[5,2],[6,2],[7,2]])),a(e([[8,3],[8,4],[8,5],[8,6],[8,7]]))},isShip:e=>{const[t,o]=e;return"none"!==n[t][o]},getShip:e=>{const[t,o]=e;return n[t][o]},ships:s,type:t}}(t),r=e=>{n.push(e)};return{attempt:r,board:o,type:t,generateMove:()=>{const e=e=>Math.floor(Math.random()*e),t=e=>n.some((t=>{const[n,o]=t;return n===e[0]&&o===e[1]}));let o=[e(9),e(9)];for(;t(o);)o=[e(9),e(9)];return r(o),o}}},n=(()=>{const t=(e,t)=>{const[n,o]=e,r=document.getElementById(`${t.type} - ${n},${o}`),s=t.isShip(e);r.innerHTML=s?"Hit":"Miss"},n=[2,3,4,5];let o=5;const r=()=>{const e=document.getElementById("chooseShip");n.find((e=>e===o-1))?(o--,e.textContent=`Choose ${o} Coordinates`):(document.querySelectorAll(".selectCell").forEach((e=>{e.style.pointerEvents="none"})),e.textContent='Click "Start Game" to Begin.')},a=e=>{const[t,n]=e,o=document.querySelectorAll(".selectCell");for(const e of o)if(parseInt(e.dataset.x)===t&&parseInt(e.dataset.y)===n)return e};return{renderBoard:e=>{const n=document.getElementById("board");n.innerHTML='<div id="overlay"></div>';const o=document.createElement("h3");console.log(e),o.innerHTML=`${e.type}'s Turn`,n.appendChild(o),e.boardArray.forEach(((t,o)=>{const r=document.createElement("div");r.classList.add("rowDiv"),t.forEach(((t,n)=>{const a=document.createElement("div");a.classList.add("boardCell"),a.id=`${e.type} - ${o},${n}`,a.dataset.board=e.type,a.dataset.x=o,a.dataset.y=n,e===s.computerPlayer.board&&"none"!==t&&a.classList.add("selected"),"none"!==t&&(a.classList.add("shipCell"),t.isSunk()&&(a.style.backgroundColor="red")),a.addEventListener("click",(e=>{e.stopPropagation(),""===a.textContent&&s.moveEvent(a)})),r.appendChild(a)})),n.appendChild(r)})),e.misses.forEach((n=>{t(n,e)})),e.hits.forEach((n=>{t(n,e)}))},attempt:t,stopClicks:()=>{document.getElementById("overlay").style.pointerEvents="all"},startClicks:()=>{document.getElementById("overlay").style.pointerEvents="none"},styleSunk:e=>{document.querySelectorAll(".rowDiv").forEach((t=>{document.querySelectorAll(".boardCell").forEach((t=>{const[n,o]=[t.dataset.x,t.dataset.y];"User"===e?s.userPlayer.board.isShip([n,o])&&s.userPlayer.board.getShip([n,o]).isSunk()&&(t.style.backgroundColor="red"):s.computerPlayer.board.isShip([n,o])&&s.computerPlayer.board.getShip([n,o]).isSunk()&&(t.style.backgroundColor="red")}))}))},renderStart:()=>{document.getElementById("startScreen").style.display="flex",document.getElementById("board").style.display="none",document.getElementById("switchTurnBtn").style.display="none",(()=>{const t=document.getElementById("startScreen");t.style.display="flex";const n=document.createElement("button");n.id="startBtn",n.textContent="Start Game";const l=document.createElement("h3");l.textContent=`Choose ${o} Coordinates`,l.id="chooseShip";for(let c=0;c<10;c++){const d=document.createElement("div");d.classList.add("rowDiv");for(let t=0;t<10;t++){const n=document.createElement("div");n.classList.add("selectCell"),d.appendChild(n),n.dataset.x=c,n.dataset.y=t,n.onmouseenter=e=>{n.style.backgroundColor="yellow";for(let e=1;e<o;e++){let n=a([c,t+e]);n=a([c+e,t]),void 0!==n&&(n.style.backgroundColor="yellow")}},n.onmouseout=e=>{n.style.backgroundColor="";for(let e=1;e<o;e++){let n=a([c,t+e]);n=a([c+e,t]),void 0!==n&&(n.style.backgroundColor="")}},n.onclick=l=>{let d=[[parseInt(n.dataset.x),parseInt(n.dataset.y)]];n.classList.add("selected");for(let e=1;e<o;e++){let n=a([c,t+e]);n=a([c+e,t]),n.classList.add("selected"),console.log(n.style.backgroundColor),d.push([parseInt(n.dataset.x),parseInt(n.dataset.y)])}s.computerPlayer.board.placeShip(e(d)),console.log("placed"),r()}}t.appendChild(d),t.appendChild(l),t.appendChild(n),n.onclick=()=>{t.style.display="",document.getElementById("board").style.display="",document.getElementById("switchTurnBtn").style.display="",n.style.display="none"}}})()},toggleTurnBtn:()=>{const e=document.getElementById("switchTurnBtn");e.disabled=!e.disabled}}})(),o=n,r=(()=>{const e=t("Computer"),n=t("User");let s=n;const a=e=>{e.board.ships.length>0&&e.board.ships.every((e=>e.isSunk()))&&alert(`${s.type} wins`)};return{initGame:()=>{n.board,e.board},switchTurn:()=>{console.log("start switch",r.currentPlayer.type),r.currentPlayer===n?r.currentPlayer=e:r.currentPlayer=n,console.log("end switch",r.currentPlayer.type)},computerPlayer:e,userPlayer:n,currentPlayer:s,checkLoss:a,moveEvent:t=>{o.stopClicks();const l="Computer"===t.dataset.board?e.board:n.board;l.receiveAttack([t.dataset.x,t.dataset.y]),o.attempt([t.dataset.x,t.dataset.y],l),o.styleSunk(l.type),a(s),r.switchTurn(),o.toggleTurnBtn()},computerMoveEvent:async()=>{o.stopClicks(),await(750,new Promise((e=>{setTimeout(e,750)}))),console.log("after 1 sec");const e=r.computerPlayer.generateMove(),t=r.computerPlayer.board;t.receiveAttack(e),o.attempt(e,t),o.styleSunk(t.type),r.checkLoss(r.currentPlayer),r.switchTurn(),o.toggleTurnBtn()}}})(),s=r;s.initGame();const a=document.getElementById("switchTurnBtn");o.renderBoard(s.currentPlayer.board),o.renderStart(),a.onclick=()=>{o.toggleTurnBtn(),o.renderBoard(s.currentPlayer.board),s.currentPlayer===s.computerPlayer?s.computerMoveEvent():o.startClicks()}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDLFlBQ0F6QixVQTdDaUIxQixJQUNqQixFQUFHMkIsYUFDSCxNQUFNOEIsRUFDbUIsYUFBdkJ6RCxFQUFLTyxRQUFRMUQsTUFDVHlFLEVBQWV6RSxNQUNma0YsRUFBV2xGLE1BRWpCNEcsRUFBVTVGLGNBQWMsQ0FBQ21DLEVBQUtPLFFBQVEvQyxFQUFHd0MsRUFBS08sUUFBUTlDLElBQ3RELEVBQUdlLFFBQVEsQ0FBQ3dCLEVBQUtPLFFBQVEvQyxFQUFHd0MsRUFBS08sUUFBUTlDLEdBQUlnRyxHQUM3QyxFQUFHNUIsVUFBVTRCLEVBQVU5RyxNQUN2QndHLEVBQVVELEdBQ1ZELEVBQUtPLGFBQ0wsRUFBR1YsZUFBZSxFQWtDbEJZLGtCQS9Cd0JDLFVBQ3hCLEVBQUdoQyxtQkFRUyxJQUxILElBQUlpQyxTQUFTQyxJQUNsQkMsV0FBV0QsRUFJSCxJQUp5QixLQU1yQ2pELFFBQVFDLElBQUksZUFDWixNQUFNdEQsRUFBYzBGLEVBQUszQixlQUFlN0MsZUFFbENnRixFQUFZUixFQUFLM0IsZUFBZXpFLE1BQ3RDNEcsRUFBVTVGLGNBQWNOLEdBQ3hCLEVBQUdpQixRQUFRakIsRUFBYWtHLEdBQ3hCLEVBQUc1QixVQUFVNEIsRUFBVTlHLE1BQ3ZCc0csRUFBS0UsVUFBVUYsRUFBS0MsZUFDcEJELEVBQUtPLGFBQ0wsRUFBR1YsZUFBZSxFQWFyQixFQWxGWSxHQW9GYixJQ3BGQSxFQUFLUyxXQUNMLE1BQU1SLEVBQWdCMUQsU0FBU0MsZUFBZSxpQkFDOUMsRUFBR2tCLFlBQVksRUFBSzBDLGNBQWNyRyxPQUNsQyxFQUFHbUYsY0FFSGUsRUFBY0osUUFBVSxLQUN0QixFQUFHRyxnQkFFSCxFQUFHdEMsWUFBWSxFQUFLMEMsY0FBY3JHLE9BRTlCLEVBQUtxRyxnQkFBa0IsRUFBSzVCLGVBQzlCLEVBQUtvQyxvQkFFTCxFQUFHOUIsYUFDTCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL1NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvR2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9VSS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSBmdW5jdGlvbiAocGF0aCkge1xuICBsZXQgaGl0cyA9IDA7XG5cbiAgY29uc3QgZ2V0SGl0cyA9ICgpID0+IHtcbiAgICByZXR1cm4gaGl0cztcbiAgfTtcblxuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaGl0cysrO1xuICB9O1xuXG4gIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIHBhdGguZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgY291bnQrKztcbiAgICB9KTtcbiAgICByZXR1cm4gY291bnQ7XG4gIH07XG5cbiAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgIHJldHVybiBoaXRzID49IGdldExlbmd0aCgpO1xuICB9O1xuXG4gIGNvbnN0IGdldFBhdGggPSAoKSA9PiB7XG4gICAgcmV0dXJuIHBhdGg7XG4gIH07XG5cbiAgY29uc3QgcmVzZXRIaXRzID0gKCkgPT4ge1xuICAgIGhpdHMgPSAwO1xuICB9O1xuXG4gIHJldHVybiB7IGdldExlbmd0aCwgaXNTdW5rLCBoaXQsIGdldEhpdHMsIGdldFBhdGgsIHJlc2V0SGl0cywgaGl0cyB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IFNoaXA7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuXG5jb25zdCBQbGF5ZXIgPSAodHlwZSkgPT4ge1xuICBjb25zdCBhdHRlbXB0cyA9IFtdO1xuICBjb25zdCB0dXJuID0gZmFsc2U7XG4gIGNvbnN0IGJvYXJkID0gR2FtZWJvYXJkKHR5cGUpO1xuXG4gIGNvbnN0IGF0dGVtcHQgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBhdHRlbXB0cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgfTtcblxuICBjb25zdCBnZW5lcmF0ZU1vdmUgPSAoKSA9PiB7XG4gICAgY29uc3QgZ2V0UmFuZG9tSW50ID0gKG1heCkgPT4ge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNoZWNrQXR0ZW1wdGVkID0gKGF0dGVtcHQpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF0dGVtcHRzLnNvbWUoKGNvb3JkaW5hdGUpID0+IHtcbiAgICAgICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZTtcblxuICAgICAgICByZXR1cm4geCA9PT0gYXR0ZW1wdFswXSAmJiB5ID09PSBhdHRlbXB0WzFdO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIGxldCBtb3ZlID0gW2dldFJhbmRvbUludCg5KSwgZ2V0UmFuZG9tSW50KDkpXTtcblxuICAgIHdoaWxlIChjaGVja0F0dGVtcHRlZChtb3ZlKSkge1xuICAgICAgbW92ZSA9IFtnZXRSYW5kb21JbnQoOSksIGdldFJhbmRvbUludCg5KV07XG4gICAgfVxuXG4gICAgYXR0ZW1wdChtb3ZlKTtcblxuICAgIHJldHVybiBtb3ZlO1xuICB9O1xuXG4gIHJldHVybiB7IGF0dGVtcHQsIGJvYXJkLCB0eXBlLCBnZW5lcmF0ZU1vdmUgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcbiIsImltcG9ydCBTaGlwIGZyb20gXCIuL1NoaXAuanNcIjtcblxuY29uc3QgR2FtZWJvYXJkID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgY29uc3QgYm9hcmRBcnJheSA9IFsuLi5BcnJheSgxMCldLm1hcCgoZSkgPT4gQXJyYXkoMTApLmZpbGwoXCJub25lXCIpKTtcbiAgY29uc3QgaGl0cyA9IFtdO1xuICBjb25zdCBtaXNzZXMgPSBbXTtcbiAgbGV0IHNoaXBzID0gW107XG5cbiAgY29uc3QgaW5pdEJvYXJkID0gKCkgPT4ge1xuICAgIHBsYWNlU2hpcChcbiAgICAgIFNoaXAoW1xuICAgICAgICBbMSwgNF0sXG4gICAgICAgIFsxLCA1XSxcbiAgICAgIF0pXG4gICAgKTtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzYsIDRdLFxuICAgICAgICBbNiwgNV0sXG4gICAgICAgIFs2LCA2XSxcbiAgICAgIF0pXG4gICAgKTtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzQsIDJdLFxuICAgICAgICBbNSwgMl0sXG4gICAgICAgIFs2LCAyXSxcbiAgICAgICAgWzcsIDJdLFxuICAgICAgXSlcbiAgICApO1xuXG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFs4LCAzXSxcbiAgICAgICAgWzgsIDRdLFxuICAgICAgICBbOCwgNV0sXG4gICAgICAgIFs4LCA2XSxcbiAgICAgICAgWzgsIDddLFxuICAgICAgXSlcbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0R2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGhpdHMgPSBbXTtcbiAgICBtaXNzZXMgPSBbXTtcbiAgICBzaGlwcyA9IFtdO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgcGF0aCA9IHNoaXBPYmplY3QuZ2V0UGF0aCgpO1xuICAgIHBhdGguZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGVzO1xuICAgICAgYm9hcmRBcnJheVt4XVt5XSA9IHNoaXBPYmplY3Q7XG4gICAgfSk7XG4gICAgYWRkU2hpcChzaGlwT2JqZWN0KTtcbiAgfTtcblxuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG5cbiAgICBsZXQgYWxyZWFkeUhpdCxcbiAgICAgIGFscmVhZHlNaXNzID0gZmFsc2U7XG5cbiAgICBhbHJlYWR5SGl0ID0gaGl0cy5zb21lKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBbeEl0ZW0sIHlJdGVtXSA9IGl0ZW07XG4gICAgICByZXR1cm4geEl0ZW0gPT09IGNvb3JkaW5hdGVzWzBdICYmIHlJdGVtID09PSBjb29yZGluYXRlc1sxXTtcbiAgICB9KTtcbiAgICBhbHJlYWR5TWlzcyA9IG1pc3Nlcy5zb21lKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBbeEl0ZW0sIHlJdGVtXSA9IGl0ZW07XG4gICAgICByZXR1cm4geEl0ZW0gPT09IGNvb3JkaW5hdGVzWzBdICYmIHlJdGVtID09PSBjb29yZGluYXRlc1sxXTtcbiAgICB9KTtcblxuICAgIGlmIChib2FyZEFycmF5W3hdW3ldICE9PSBcIm5vbmVcIiAmJiBhbHJlYWR5SGl0ID09PSBmYWxzZSkge1xuICAgICAgYm9hcmRBcnJheVt4XVt5XS5oaXQoKTtcbiAgICAgIGhpdHMucHVzaChjb29yZGluYXRlcyk7XG4gICAgfSBlbHNlIGlmIChib2FyZEFycmF5W3hdW3ldID09PSBcIm5vbmVcIiAmJiBhbHJlYWR5TWlzcyA9PT0gZmFsc2UpIHtcbiAgICAgIG1pc3Nlcy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWRkU2hpcCA9IChzaGlwKSA9PiB7XG4gICAgc2hpcHMucHVzaChzaGlwKTtcbiAgfTtcblxuICBjb25zdCBpc1NoaXAgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcblxuICAgIHJldHVybiBib2FyZEFycmF5W3hdW3ldICE9PSBcIm5vbmVcIjtcbiAgfTtcblxuICBjb25zdCBnZXRTaGlwID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG5cbiAgICByZXR1cm4gYm9hcmRBcnJheVt4XVt5XTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHBsYWNlU2hpcCxcbiAgICBib2FyZEFycmF5LFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgaGl0cyxcbiAgICBtaXNzZXMsXG4gICAgYWRkU2hpcCxcbiAgICByZXNldEdhbWVib2FyZCxcbiAgICBpbml0Qm9hcmQsXG4gICAgaXNTaGlwLFxuICAgIGdldFNoaXAsXG4gICAgc2hpcHMsXG4gICAgdHlwZSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDtcbiIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vR2FtZWJvYXJkXCI7XG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL1BsYXllclwiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vU2hpcFwiO1xuaW1wb3J0IGdhbWUgZnJvbSBcIi4vZ2FtZVwiO1xuXG5jb25zdCBVSSA9ICgoKSA9PiB7XG4gIGNvbnN0IHJlbmRlclN0YXJ0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0U2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFydFNjcmVlblwiKTtcbiAgICBzdGFydFNjcmVlbi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICBjb25zdCBib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9hcmRcIik7XG4gICAgYm9hcmQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgY29uc3QgbmV4dFR1cm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN3aXRjaFR1cm5CdG5cIik7XG4gICAgbmV4dFR1cm5CdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgZ2VuZXJhdGVHcmlkKCk7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRFdmVudCA9IChlbGVtZW50KSA9PiB7XG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblxuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib2FyZFwiKTtcbiAgICBib2FyZC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblxuICAgIGNvbnN0IG5leHRUdXJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzd2l0Y2hUdXJuQnRuXCIpO1xuICAgIG5leHRUdXJuQnRuLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlckJvYXJkID0gKHBsYXllckJvYXJkKSA9PiB7XG4gICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvYXJkXCIpO1xuICAgIGJvYXJkLmlubmVySFRNTCA9IGA8ZGl2IGlkPVwib3ZlcmxheVwiPjwvZGl2PmA7XG5cbiAgICBjb25zdCBwbGF5ZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJCb2FyZCk7XG4gICAgcGxheWVyVGl0bGUuaW5uZXJIVE1MID0gYCR7cGxheWVyQm9hcmQudHlwZX0ncyBUdXJuYDtcblxuICAgIGJvYXJkLmFwcGVuZENoaWxkKHBsYXllclRpdGxlKTtcblxuICAgIHBsYXllckJvYXJkLmJvYXJkQXJyYXkuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgY29uc3Qgcm93RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHJvd0Rpdi5jbGFzc0xpc3QuYWRkKFwicm93RGl2XCIpO1xuXG4gICAgICByb3cuZm9yRWFjaCgoaXRlbSwgY2VsbEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJib2FyZENlbGxcIik7XG4gICAgICAgIGNlbGwuaWQgPSBgJHtwbGF5ZXJCb2FyZC50eXBlfSAtICR7cm93SW5kZXh9LCR7Y2VsbEluZGV4fWA7XG4gICAgICAgIGNlbGwuZGF0YXNldC5ib2FyZCA9IHBsYXllckJvYXJkLnR5cGU7XG4gICAgICAgIGNlbGwuZGF0YXNldC54ID0gcm93SW5kZXg7XG4gICAgICAgIGNlbGwuZGF0YXNldC55ID0gY2VsbEluZGV4O1xuXG4gICAgICAgIGlmIChwbGF5ZXJCb2FyZCA9PT0gZ2FtZS5jb21wdXRlclBsYXllci5ib2FyZCAmJiBpdGVtICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW0gIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwic2hpcENlbGxcIik7XG5cbiAgICAgICAgICBpZiAoaXRlbS5pc1N1bmsoKSkge1xuICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoY2VsbC50ZXh0Q29udGVudCA9PT0gXCJcIikgZ2FtZS5tb3ZlRXZlbnQoY2VsbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJvd0Rpdi5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgIH0pO1xuXG4gICAgICBib2FyZC5hcHBlbmRDaGlsZChyb3dEaXYpO1xuICAgIH0pO1xuXG4gICAgcGxheWVyQm9hcmQubWlzc2VzLmZvckVhY2goKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBhdHRlbXB0KGNvb3JkaW5hdGVzLCBwbGF5ZXJCb2FyZCk7XG4gICAgfSk7XG4gICAgcGxheWVyQm9hcmQuaGl0cy5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgYXR0ZW1wdChjb29yZGluYXRlcywgcGxheWVyQm9hcmQpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGF0dGVtcHQgPSAoY29vcmRpbmF0ZXMsIGdhbWVib2FyZCkgPT4ge1xuICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGVzO1xuICAgIGNvbnN0IHRhcmdldENlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtnYW1lYm9hcmQudHlwZX0gLSAke3h9LCR7eX1gKTtcbiAgICBjb25zdCBpc1NoaXAgPSBnYW1lYm9hcmQuaXNTaGlwKGNvb3JkaW5hdGVzKTtcblxuICAgIGlmIChpc1NoaXApIHtcbiAgICAgIHRhcmdldENlbGwuaW5uZXJIVE1MID0gXCJIaXRcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0Q2VsbC5pbm5lckhUTUwgPSBcIk1pc3NcIjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3RvcENsaWNrcyA9ICgpID0+IHtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuXG4gICAgb3ZlcmxheS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJhbGxcIjtcbiAgfTtcblxuICBjb25zdCBzdGFydENsaWNrcyA9ICgpID0+IHtcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuXG4gICAgb3ZlcmxheS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gIH07XG5cbiAgY29uc3Qgc3R5bGVTdW5rID0gKGJvYXJkVHlwZSkgPT4ge1xuICAgIGNvbnN0IHJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJvd0RpdlwiKTtcbiAgICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvYXJkQ2VsbFwiKTtcbiAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgICAgY29uc3QgW3gsIHldID0gW2NlbGwuZGF0YXNldC54LCBjZWxsLmRhdGFzZXQueV07XG5cbiAgICAgICAgaWYgKGJvYXJkVHlwZSA9PT0gXCJVc2VyXCIpIHtcbiAgICAgICAgICBpZiAoZ2FtZS51c2VyUGxheWVyLmJvYXJkLmlzU2hpcChbeCwgeV0pKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwID0gZ2FtZS51c2VyUGxheWVyLmJvYXJkLmdldFNoaXAoW3gsIHldKTtcbiAgICAgICAgICAgIGlmIChzaGlwLmlzU3VuaygpKSBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChnYW1lLmNvbXB1dGVyUGxheWVyLmJvYXJkLmlzU2hpcChbeCwgeV0pKSB7XG4gICAgICAgICAgICBjb25zdCBzaGlwID0gZ2FtZS5jb21wdXRlclBsYXllci5ib2FyZC5nZXRTaGlwKFt4LCB5XSk7XG4gICAgICAgICAgICBpZiAoc2hpcC5pc1N1bmsoKSkgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlVHVybkJ0biA9ICgpID0+IHtcbiAgICBjb25zdCBzd2l0Y2hUdXJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzd2l0Y2hUdXJuQnRuXCIpO1xuICAgIHN3aXRjaFR1cm5CdG4uZGlzYWJsZWQgPSAhc3dpdGNoVHVybkJ0bi5kaXNhYmxlZDtcbiAgfTtcblxuICAvLyBDaG9vc2UgU2hpcCBMb2NhdGlvbnNcblxuICBsZXQgaXNWZXJ0aWNhbCA9IHRydWU7XG4gIGNvbnN0IHNoaXBMZW5ndGhzID0gWzIsIDMsIDQsIDVdO1xuICBsZXQgY3VycmVudFNoaXBMZW5ndGggPSA1O1xuXG4gIGNvbnN0IGdlbmVyYXRlR3JpZCA9ICgpID0+IHtcbiAgICBjb25zdCBzdGFydFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhcnRTY3JlZW5cIik7XG4gICAgc3RhcnRTY3JlZW4uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXG4gICAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHN0YXJ0QnV0dG9uLmlkID0gXCJzdGFydEJ0blwiO1xuICAgIHN0YXJ0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTdGFydCBHYW1lXCI7XG5cbiAgICBjb25zdCBjaG9vc2VTaGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgIGNob29zZVNoaXAudGV4dENvbnRlbnQgPSBgQ2hvb3NlICR7Y3VycmVudFNoaXBMZW5ndGh9IENvb3JkaW5hdGVzYDtcbiAgICBjaG9vc2VTaGlwLmlkID0gXCJjaG9vc2VTaGlwXCI7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGNvbnN0IHJvd0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICByb3dEaXYuY2xhc3NMaXN0LmFkZChcInJvd0RpdlwiKTtcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RDZWxsXCIpO1xuICAgICAgICByb3dEaXYuYXBwZW5kQ2hpbGQoY2VsbCk7XG5cbiAgICAgICAgY2VsbC5kYXRhc2V0LnggPSBpO1xuICAgICAgICBjZWxsLmRhdGFzZXQueSA9IGo7XG5cbiAgICAgICAgY2VsbC5vbm1vdXNlZW50ZXIgPSAoZSkgPT4ge1xuICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ5ZWxsb3dcIjtcbiAgICAgICAgICBmb3IgKGxldCBrID0gMTsgayA8IGN1cnJlbnRTaGlwTGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGxldCBuZXdDZWxsID0gZ2V0U2VsZWN0Q2VsbChbaSwgaiArIGtdKTtcblxuICAgICAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgbmV3Q2VsbCA9IGdldFNlbGVjdENlbGwoW2kgKyBrLCBqXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdDZWxsICE9PSB1bmRlZmluZWQpIG5ld0NlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ5ZWxsb3dcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY2VsbC5vbm1vdXNlb3V0ID0gKGUpID0+IHtcbiAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG4gICAgICAgICAgZm9yIChsZXQgayA9IDE7IGsgPCBjdXJyZW50U2hpcExlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBsZXQgbmV3Q2VsbCA9IGdldFNlbGVjdENlbGwoW2ksIGogKyBrXSk7XG5cbiAgICAgICAgICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgIG5ld0NlbGwgPSBnZXRTZWxlY3RDZWxsKFtpICsgaywgal0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3Q2VsbCAhPT0gdW5kZWZpbmVkKSBuZXdDZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNlbGwub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgbGV0IHNoaXBDb29yZGluYXRlcyA9IFtcbiAgICAgICAgICAgIFtwYXJzZUludChjZWxsLmRhdGFzZXQueCksIHBhcnNlSW50KGNlbGwuZGF0YXNldC55KV0sXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuXG4gICAgICAgICAgZm9yIChsZXQgayA9IDE7IGsgPCBjdXJyZW50U2hpcExlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBsZXQgbmV3Q2VsbCA9IGdldFNlbGVjdENlbGwoW2ksIGogKyBrXSk7XG5cbiAgICAgICAgICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgIG5ld0NlbGwgPSBnZXRTZWxlY3RDZWxsKFtpICsgaywgal0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdDZWxsLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld0NlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgIHNoaXBDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICAgICAgcGFyc2VJbnQobmV3Q2VsbC5kYXRhc2V0LngpLFxuICAgICAgICAgICAgICBwYXJzZUludChuZXdDZWxsLmRhdGFzZXQueSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnYW1lLmNvbXB1dGVyUGxheWVyLmJvYXJkLnBsYWNlU2hpcChTaGlwKHNoaXBDb29yZGluYXRlcykpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJwbGFjZWRcIik7XG4gICAgICAgICAgbmV4dFNoaXAoKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgc3RhcnRTY3JlZW4uYXBwZW5kQ2hpbGQocm93RGl2KTtcbiAgICAgIHN0YXJ0U2NyZWVuLmFwcGVuZENoaWxkKGNob29zZVNoaXApO1xuICAgICAgc3RhcnRTY3JlZW4uYXBwZW5kQ2hpbGQoc3RhcnRCdXR0b24pO1xuXG4gICAgICBzdGFydEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBzdGFydEV2ZW50KHN0YXJ0U2NyZWVuKTtcbiAgICAgICAgc3RhcnRCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbmV4dFNoaXAgPSAoKSA9PiB7XG4gICAgY29uc3QgY2hvb3NlU2hpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hvb3NlU2hpcFwiKTtcblxuICAgIGlmIChcbiAgICAgIHNoaXBMZW5ndGhzLmZpbmQoKGxlbmd0aCkgPT4ge1xuICAgICAgICByZXR1cm4gbGVuZ3RoID09PSBjdXJyZW50U2hpcExlbmd0aCAtIDE7XG4gICAgICB9KVxuICAgICkge1xuICAgICAgY3VycmVudFNoaXBMZW5ndGgtLTtcbiAgICAgIGNob29zZVNoaXAudGV4dENvbnRlbnQgPSBgQ2hvb3NlICR7Y3VycmVudFNoaXBMZW5ndGh9IENvb3JkaW5hdGVzYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdENlbGxcIik7XG4gICAgICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICAgIGNlbGwuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICAgICAgfSk7XG4gICAgICBjaG9vc2VTaGlwLnRleHRDb250ZW50ID0gYENsaWNrIFwiU3RhcnQgR2FtZVwiIHRvIEJlZ2luLmA7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldFNlbGVjdENlbGwgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcblxuICAgIGNvbnN0IHNlbGVjdENlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RDZWxsXCIpO1xuICAgIGZvciAoY29uc3Qgc2VsZWN0Q2VsbCBvZiBzZWxlY3RDZWxscykge1xuICAgICAgaWYgKFxuICAgICAgICBwYXJzZUludChzZWxlY3RDZWxsLmRhdGFzZXQueCkgPT09IHggJiZcbiAgICAgICAgcGFyc2VJbnQoc2VsZWN0Q2VsbC5kYXRhc2V0LnkpID09PSB5XG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdENlbGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVuZGVyQm9hcmQsXG4gICAgYXR0ZW1wdCxcbiAgICBzdG9wQ2xpY2tzLFxuICAgIHN0YXJ0Q2xpY2tzLFxuICAgIHN0eWxlU3VuayxcbiAgICByZW5kZXJTdGFydCxcbiAgICB0b2dnbGVUdXJuQnRuLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVUk7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vU2hpcFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi9VSVwiO1xuXG5jb25zdCBnYW1lID0gKCgpID0+IHtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBQbGF5ZXIoXCJDb21wdXRlclwiKTtcbiAgY29uc3QgdXNlclBsYXllciA9IFBsYXllcihcIlVzZXJcIik7XG5cbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSB1c2VyUGxheWVyO1xuXG4gIGNvbnN0IGluaXRHYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJCb2FyZCA9IHVzZXJQbGF5ZXIuYm9hcmQ7XG4gICAgY29uc3QgY29tcHV0ZXJCb2FyZCA9IGNvbXB1dGVyUGxheWVyLmJvYXJkO1xuICAgIC8vIGNvbXB1dGVyQm9hcmQuaW5pdEJvYXJkKCk7XG4gICAgLy8gdXNlckJvYXJkLmluaXRCb2FyZCgpO1xuICB9O1xuXG4gIGNvbnN0IHN3aXRjaFR1cm4gPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJzdGFydCBzd2l0Y2hcIiwgZ2FtZS5jdXJyZW50UGxheWVyLnR5cGUpO1xuICAgIGlmIChnYW1lLmN1cnJlbnRQbGF5ZXIgPT09IHVzZXJQbGF5ZXIpIHtcbiAgICAgIGdhbWUuY3VycmVudFBsYXllciA9IGNvbXB1dGVyUGxheWVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYW1lLmN1cnJlbnRQbGF5ZXIgPSB1c2VyUGxheWVyO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiZW5kIHN3aXRjaFwiLCBnYW1lLmN1cnJlbnRQbGF5ZXIudHlwZSk7XG4gIH07XG5cbiAgY29uc3QgY2hlY2tMb3NzID0gKHBsYXllcikgPT4ge1xuICAgIGNvbnN0IGFsbFN1bmsgPVxuICAgICAgcGxheWVyLmJvYXJkLnNoaXBzLmxlbmd0aCA+IDAgJiZcbiAgICAgIHBsYXllci5ib2FyZC5zaGlwcy5ldmVyeSgoc2hpcCkgPT4ge1xuICAgICAgICByZXR1cm4gc2hpcC5pc1N1bmsoKTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGFsbFN1bmspIGFsZXJ0KGAke2N1cnJlbnRQbGF5ZXIudHlwZX0gd2luc2ApO1xuICB9O1xuXG4gIGNvbnN0IG1vdmVFdmVudCA9IChjZWxsKSA9PiB7XG4gICAgVUkuc3RvcENsaWNrcygpO1xuICAgIGNvbnN0IGNlbGxCb2FyZCA9XG4gICAgICBjZWxsLmRhdGFzZXQuYm9hcmQgPT09IFwiQ29tcHV0ZXJcIlxuICAgICAgICA/IGNvbXB1dGVyUGxheWVyLmJvYXJkXG4gICAgICAgIDogdXNlclBsYXllci5ib2FyZDtcblxuICAgIGNlbGxCb2FyZC5yZWNlaXZlQXR0YWNrKFtjZWxsLmRhdGFzZXQueCwgY2VsbC5kYXRhc2V0LnldKTtcbiAgICBVSS5hdHRlbXB0KFtjZWxsLmRhdGFzZXQueCwgY2VsbC5kYXRhc2V0LnldLCBjZWxsQm9hcmQpO1xuICAgIFVJLnN0eWxlU3VuayhjZWxsQm9hcmQudHlwZSk7XG4gICAgY2hlY2tMb3NzKGN1cnJlbnRQbGF5ZXIpO1xuICAgIGdhbWUuc3dpdGNoVHVybigpO1xuICAgIFVJLnRvZ2dsZVR1cm5CdG4oKTtcbiAgfTtcblxuICBjb25zdCBjb21wdXRlck1vdmVFdmVudCA9IGFzeW5jICgpID0+IHtcbiAgICBVSS5zdG9wQ2xpY2tzKCk7XG5cbiAgICBjb25zdCBkZWxheSA9IChtaWxsaXNlY29uZHMpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGxpc2Vjb25kcyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgYXdhaXQgZGVsYXkoNzUwKTtcblxuICAgIGNvbnNvbGUubG9nKFwiYWZ0ZXIgMSBzZWNcIik7XG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBnYW1lLmNvbXB1dGVyUGxheWVyLmdlbmVyYXRlTW92ZSgpO1xuXG4gICAgY29uc3QgY2VsbEJvYXJkID0gZ2FtZS5jb21wdXRlclBsYXllci5ib2FyZDtcbiAgICBjZWxsQm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gICAgVUkuYXR0ZW1wdChjb29yZGluYXRlcywgY2VsbEJvYXJkKTtcbiAgICBVSS5zdHlsZVN1bmsoY2VsbEJvYXJkLnR5cGUpO1xuICAgIGdhbWUuY2hlY2tMb3NzKGdhbWUuY3VycmVudFBsYXllcik7XG4gICAgZ2FtZS5zd2l0Y2hUdXJuKCk7XG4gICAgVUkudG9nZ2xlVHVybkJ0bigpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdEdhbWUsXG4gICAgc3dpdGNoVHVybixcbiAgICBjb21wdXRlclBsYXllcixcbiAgICB1c2VyUGxheWVyLFxuICAgIGN1cnJlbnRQbGF5ZXIsXG4gICAgY2hlY2tMb3NzLFxuICAgIG1vdmVFdmVudCxcbiAgICBjb21wdXRlck1vdmVFdmVudCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWU7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL21vZHVsZXMvR2FtZWJvYXJkLmpzXCI7XG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9tb2R1bGVzL1NoaXAuanNcIjtcbmltcG9ydCBnYW1lIGZyb20gXCIuL21vZHVsZXMvZ2FtZS5qc1wiO1xuaW1wb3J0IFVJIGZyb20gXCIuL21vZHVsZXMvVUkuanNcIjtcblxuZ2FtZS5pbml0R2FtZSgpO1xuY29uc3Qgc3dpdGNoVHVybkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3dpdGNoVHVybkJ0blwiKTtcblVJLnJlbmRlckJvYXJkKGdhbWUuY3VycmVudFBsYXllci5ib2FyZCk7XG5VSS5yZW5kZXJTdGFydCgpO1xuXG5zd2l0Y2hUdXJuQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gIFVJLnRvZ2dsZVR1cm5CdG4oKTtcblxuICBVSS5yZW5kZXJCb2FyZChnYW1lLmN1cnJlbnRQbGF5ZXIuYm9hcmQpO1xuXG4gIGlmIChnYW1lLmN1cnJlbnRQbGF5ZXIgPT09IGdhbWUuY29tcHV0ZXJQbGF5ZXIpIHtcbiAgICBnYW1lLmNvbXB1dGVyTW92ZUV2ZW50KCk7XG4gIH0gZWxzZSB7XG4gICAgVUkuc3RhcnRDbGlja3MoKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJwYXRoIiwiaGl0cyIsImdldExlbmd0aCIsImNvdW50IiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpc1N1bmsiLCJoaXQiLCJnZXRIaXRzIiwiZ2V0UGF0aCIsInJlc2V0SGl0cyIsInR5cGUiLCJhdHRlbXB0cyIsImJvYXJkIiwiYm9hcmRBcnJheSIsIkFycmF5IiwibWFwIiwiZSIsImZpbGwiLCJtaXNzZXMiLCJzaGlwcyIsInBsYWNlU2hpcCIsInNoaXBPYmplY3QiLCJjb29yZGluYXRlcyIsIngiLCJ5IiwiYWRkU2hpcCIsInNoaXAiLCJwdXNoIiwicmVjZWl2ZUF0dGFjayIsImFscmVhZHlIaXQiLCJhbHJlYWR5TWlzcyIsInNvbWUiLCJpdGVtIiwieEl0ZW0iLCJ5SXRlbSIsInJlc2V0R2FtZWJvYXJkIiwiaW5pdEJvYXJkIiwiaXNTaGlwIiwiZ2V0U2hpcCIsImF0dGVtcHQiLCJnZW5lcmF0ZU1vdmUiLCJnZXRSYW5kb21JbnQiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjaGVja0F0dGVtcHRlZCIsImNvb3JkaW5hdGUiLCJtb3ZlIiwiVUkiLCJnYW1lYm9hcmQiLCJ0YXJnZXRDZWxsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsInNoaXBMZW5ndGhzIiwiY3VycmVudFNoaXBMZW5ndGgiLCJuZXh0U2hpcCIsImNob29zZVNoaXAiLCJmaW5kIiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2VsbCIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsImdldFNlbGVjdENlbGwiLCJzZWxlY3RDZWxscyIsInNlbGVjdENlbGwiLCJwYXJzZUludCIsImRhdGFzZXQiLCJyZW5kZXJCb2FyZCIsInBsYXllckJvYXJkIiwicGxheWVyVGl0bGUiLCJjcmVhdGVFbGVtZW50IiwiY29uc29sZSIsImxvZyIsImFwcGVuZENoaWxkIiwicm93Iiwicm93SW5kZXgiLCJyb3dEaXYiLCJjbGFzc0xpc3QiLCJhZGQiLCJjZWxsSW5kZXgiLCJpZCIsImNvbXB1dGVyUGxheWVyIiwiYmFja2dyb3VuZENvbG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0b3BQcm9wYWdhdGlvbiIsIm1vdmVFdmVudCIsInN0b3BDbGlja3MiLCJzdGFydENsaWNrcyIsInN0eWxlU3VuayIsImJvYXJkVHlwZSIsInVzZXJQbGF5ZXIiLCJyZW5kZXJTdGFydCIsImRpc3BsYXkiLCJzdGFydFNjcmVlbiIsInN0YXJ0QnV0dG9uIiwiaSIsImoiLCJvbm1vdXNlZW50ZXIiLCJrIiwibmV3Q2VsbCIsInVuZGVmaW5lZCIsIm9ubW91c2VvdXQiLCJvbmNsaWNrIiwic2hpcENvb3JkaW5hdGVzIiwiZ2VuZXJhdGVHcmlkIiwidG9nZ2xlVHVybkJ0biIsInN3aXRjaFR1cm5CdG4iLCJkaXNhYmxlZCIsImdhbWUiLCJjdXJyZW50UGxheWVyIiwiY2hlY2tMb3NzIiwicGxheWVyIiwiZXZlcnkiLCJhbGVydCIsImluaXRHYW1lIiwic3dpdGNoVHVybiIsImNlbGxCb2FyZCIsImNvbXB1dGVyTW92ZUV2ZW50IiwiYXN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9