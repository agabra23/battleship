(()=>{"use strict";const t=function(t){let e=0;const r=()=>{let e=0;return t.forEach((t=>{e++})),e};return{getLength:r,isSunk:()=>e>=r(),hit:()=>{e++},getHits:()=>e,getPath:()=>t,resetHits:()=>{e=0}}},e=e=>{const r=[],n=function(){const e=[...Array(10)].map((t=>Array(10).fill("none"))),r=[],n=[];let o=[];const s=t=>{t.getPath().forEach((r=>{const[n,o]=r;e[n][o]=t})),a(t)},a=t=>{o.push(t)};return{placeShip:s,boardArray:e,receiveAttack:t=>{const[o,s]=t;let a,c=!1;a=r.some((e=>{const[r,n]=e;return r===t[0]&&n===t[1]})),c=n.some((e=>{const[r,n]=e;return r===t[0]&&n===t[1]})),"none"!==e[o][s]&&!1===a?(e[o][s].hit(),r.push(t)):"none"===e[o][s]&&!1===c&&n.push(t)},hits:r,misses:n,addShip:a,resetGameboard:()=>{r=[],n=[],o=[]},initBoard:()=>{s(t([[1,4],[1,5]])),s(t([[6,4],[6,5],[6,6]])),s(t([[4,2],[5,2],[6,2],[7,2]])),s(t([[4,2],[5,2],[6,2],[7,2]])),s(t([[8,3],[8,4],[8,5],[8,6],[8,7]])),s(t([[2,3],[2,4],[2,5],[2,6],[2,7]]))},isShip:t=>{const[r,n]=t;return"none"!==e[r][n]},getShip:t=>{const[r,n]=t;return e[r][n]},ships:o}}(),o=t=>{r.push(t)};return"computer"===e?{attempt:o,generateMove:()=>{const t=t=>Math.floor(Math.random()*t),e=t=>r.some((e=>{const[r,n]=e;return r===t[0]&&n===t[1]}));let n=[t(9),t(9)];for(;e(n);)n=[t(9),t(9)];return n},board:n}:{attempt:o,board:n}},r=t=>{const e=document.getElementById("board");t.boardArray.forEach(((t,r)=>{const n=document.createElement("div");n.classList.add("rowDiv"),t.forEach(((t,e)=>{const o=document.createElement("div");o.classList.add("boardCell"),o.id=`${r},${e}`,"none"!==t&&o.classList.add("shipCell"),n.appendChild(o)})),e.appendChild(n)}))},n=(t,e)=>{const[r,n]=t,o=document.getElementById(`${r},${n}`),s=e.isShip(t);o.innerHTML=s?"Hit":"Miss"},o=(()=>{const t=e("computer"),r=e("user");let o=r;return{initGame:()=>{console.log("init");const e=r.board;t.board.initBoard(),e.initBoard()},playRound:(e,o)=>{e===r&&(t.board.receiveAttack([2,3]),n([2,3],t.board))},switchTurn:()=>{o=o===r?t:r},computerPlayer:t,userPlayer:r,currentPlayer:o,checkWin:()=>o.board.ships.every((t=>t.isSunk()))}})();o.initGame(),console.log("start"),r(o.computerPlayer.board),o.playRound(o.currentPlayer)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBRVosTUFBTUMsRUFBWUwsRUFBV3RELE1BQ1BxRCxFQUFlckQsTUFDdkJ3QixZQUNkbUMsRUFBVW5DLFdBQVcsRUE0QnJCb0MsVUF6QmdCLENBQUNDLEVBQVFuRCxLQUNyQm1ELElBQVdQLElBQ2JELEVBQWVyRCxNQUFNZ0IsY0FBYyxDQUFDLEVBQUcsSUFDdkMsRUFBVyxDQUFDLEVBQUcsR0FBSXFDLEVBQWVyRCxPQUNwQyxFQXNCQThELFdBbkJpQixLQUVmUCxFQURFQSxJQUFrQkQsRUFDSkQsRUFFQUMsQ0FDbEIsRUFlQUQsaUJBQ0FDLGFBQ0FDLGdCQUNBUSxTQWZlLElBQ0lSLEVBQWN2RCxNQUFNTyxNQUVyQnlELE9BQU9sRCxHQUNoQkEsRUFBS3JCLFdBYWpCLEVBL0NZLEdDQWIsRUFBSytELFdBRUxDLFFBQVFDLElBQUksU0FDWixFQUFlLEVBQUtMLGVBQWVyRCxPQUVuQyxFQUFLNEQsVUFBVSxFQUFLTCxjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL1NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvR2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9VSS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSBmdW5jdGlvbiAocGF0aCkge1xuICBsZXQgaGl0cyA9IDA7XG5cbiAgY29uc3QgZ2V0SGl0cyA9ICgpID0+IHtcbiAgICByZXR1cm4gaGl0cztcbiAgfTtcblxuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaGl0cysrO1xuICB9O1xuXG4gIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIHBhdGguZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgY291bnQrKztcbiAgICB9KTtcbiAgICByZXR1cm4gY291bnQ7XG4gIH07XG5cbiAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgIHJldHVybiBoaXRzID49IGdldExlbmd0aCgpO1xuICB9O1xuXG4gIGNvbnN0IGdldFBhdGggPSAoKSA9PiB7XG4gICAgcmV0dXJuIHBhdGg7XG4gIH07XG5cbiAgY29uc3QgcmVzZXRIaXRzID0gKCkgPT4ge1xuICAgIGhpdHMgPSAwO1xuICB9O1xuXG4gIHJldHVybiB7IGdldExlbmd0aCwgaXNTdW5rLCBoaXQsIGdldEhpdHMsIGdldFBhdGgsIHJlc2V0SGl0cyB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IFNoaXA7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuXG5jb25zdCBQbGF5ZXIgPSAodHlwZSkgPT4ge1xuICBjb25zdCBhdHRlbXB0cyA9IFtdO1xuICBjb25zdCB0dXJuID0gZmFsc2U7XG4gIGNvbnN0IGJvYXJkID0gR2FtZWJvYXJkKCk7XG5cbiAgY29uc3QgYXR0ZW1wdCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGF0dGVtcHRzLnB1c2goY29vcmRpbmF0ZXMpO1xuICB9O1xuXG4gIGNvbnN0IGdlbmVyYXRlTW92ZSA9ICgpID0+IHtcbiAgICBjb25zdCBnZXRSYW5kb21JbnQgPSAobWF4KSA9PiB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2hlY2tBdHRlbXB0ZWQgPSAoYXR0ZW1wdCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXR0ZW1wdHMuc29tZSgoY29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlO1xuXG4gICAgICAgIHJldHVybiB4ID09PSBhdHRlbXB0WzBdICYmIHkgPT09IGF0dGVtcHRbMV07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgbGV0IG1vdmUgPSBbZ2V0UmFuZG9tSW50KDkpLCBnZXRSYW5kb21JbnQoOSldO1xuXG4gICAgd2hpbGUgKGNoZWNrQXR0ZW1wdGVkKG1vdmUpKSB7XG4gICAgICBtb3ZlID0gW2dldFJhbmRvbUludCg5KSwgZ2V0UmFuZG9tSW50KDkpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbW92ZTtcbiAgfTtcblxuICBpZiAodHlwZSA9PT0gXCJjb21wdXRlclwiKSByZXR1cm4geyBhdHRlbXB0LCBnZW5lcmF0ZU1vdmUsIGJvYXJkIH07XG5cbiAgcmV0dXJuIHsgYXR0ZW1wdCwgYm9hcmQgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcbiIsImltcG9ydCBTaGlwIGZyb20gXCIuL1NoaXAuanNcIjtcblxuY29uc3QgR2FtZWJvYXJkID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBib2FyZEFycmF5ID0gWy4uLkFycmF5KDEwKV0ubWFwKChlKSA9PiBBcnJheSgxMCkuZmlsbChcIm5vbmVcIikpO1xuICBjb25zdCBoaXRzID0gW107XG4gIGNvbnN0IG1pc3NlcyA9IFtdO1xuICBsZXQgc2hpcHMgPSBbXTtcblxuICBjb25zdCBpbml0Qm9hcmQgPSAoKSA9PiB7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFsxLCA0XSxcbiAgICAgICAgWzEsIDVdLFxuICAgICAgXSlcbiAgICApO1xuICAgIHBsYWNlU2hpcChcbiAgICAgIFNoaXAoW1xuICAgICAgICBbNiwgNF0sXG4gICAgICAgIFs2LCA1XSxcbiAgICAgICAgWzYsIDZdLFxuICAgICAgXSlcbiAgICApO1xuICAgIHBsYWNlU2hpcChcbiAgICAgIFNoaXAoW1xuICAgICAgICBbNCwgMl0sXG4gICAgICAgIFs1LCAyXSxcbiAgICAgICAgWzYsIDJdLFxuICAgICAgICBbNywgMl0sXG4gICAgICBdKVxuICAgICk7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFs0LCAyXSxcbiAgICAgICAgWzUsIDJdLFxuICAgICAgICBbNiwgMl0sXG4gICAgICAgIFs3LCAyXSxcbiAgICAgIF0pXG4gICAgKTtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzgsIDNdLFxuICAgICAgICBbOCwgNF0sXG4gICAgICAgIFs4LCA1XSxcbiAgICAgICAgWzgsIDZdLFxuICAgICAgICBbOCwgN10sXG4gICAgICBdKVxuICAgICk7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFsyLCAzXSxcbiAgICAgICAgWzIsIDRdLFxuICAgICAgICBbMiwgNV0sXG4gICAgICAgIFsyLCA2XSxcbiAgICAgICAgWzIsIDddLFxuICAgICAgXSlcbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0R2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGhpdHMgPSBbXTtcbiAgICBtaXNzZXMgPSBbXTtcbiAgICBzaGlwcyA9IFtdO1xuICB9O1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgcGF0aCA9IHNoaXBPYmplY3QuZ2V0UGF0aCgpO1xuICAgIHBhdGguZm9yRWFjaCgoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGVzO1xuICAgICAgYm9hcmRBcnJheVt4XVt5XSA9IHNoaXBPYmplY3Q7XG4gICAgfSk7XG4gICAgYWRkU2hpcChzaGlwT2JqZWN0KTtcbiAgfTtcblxuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG5cbiAgICBsZXQgYWxyZWFkeUhpdCxcbiAgICAgIGFscmVhZHlNaXNzID0gZmFsc2U7XG5cbiAgICBhbHJlYWR5SGl0ID0gaGl0cy5zb21lKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBbeEl0ZW0sIHlJdGVtXSA9IGl0ZW07XG4gICAgICByZXR1cm4geEl0ZW0gPT09IGNvb3JkaW5hdGVzWzBdICYmIHlJdGVtID09PSBjb29yZGluYXRlc1sxXTtcbiAgICB9KTtcbiAgICBhbHJlYWR5TWlzcyA9IG1pc3Nlcy5zb21lKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBbeEl0ZW0sIHlJdGVtXSA9IGl0ZW07XG4gICAgICByZXR1cm4geEl0ZW0gPT09IGNvb3JkaW5hdGVzWzBdICYmIHlJdGVtID09PSBjb29yZGluYXRlc1sxXTtcbiAgICB9KTtcblxuICAgIGlmIChib2FyZEFycmF5W3hdW3ldICE9PSBcIm5vbmVcIiAmJiBhbHJlYWR5SGl0ID09PSBmYWxzZSkge1xuICAgICAgYm9hcmRBcnJheVt4XVt5XS5oaXQoKTtcbiAgICAgIGhpdHMucHVzaChjb29yZGluYXRlcyk7XG4gICAgfSBlbHNlIGlmIChib2FyZEFycmF5W3hdW3ldID09PSBcIm5vbmVcIiAmJiBhbHJlYWR5TWlzcyA9PT0gZmFsc2UpIHtcbiAgICAgIG1pc3Nlcy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWRkU2hpcCA9IChzaGlwKSA9PiB7XG4gICAgc2hpcHMucHVzaChzaGlwKTtcbiAgfTtcblxuICBjb25zdCBpc1NoaXAgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcblxuICAgIHJldHVybiBib2FyZEFycmF5W3hdW3ldICE9PSBcIm5vbmVcIjtcbiAgfTtcblxuICBjb25zdCBnZXRTaGlwID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG5cbiAgICByZXR1cm4gYm9hcmRBcnJheVt4XVt5XTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHBsYWNlU2hpcCxcbiAgICBib2FyZEFycmF5LFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgaGl0cyxcbiAgICBtaXNzZXMsXG4gICAgYWRkU2hpcCxcbiAgICByZXNldEdhbWVib2FyZCxcbiAgICBpbml0Qm9hcmQsXG4gICAgaXNTaGlwLFxuICAgIGdldFNoaXAsXG4gICAgc2hpcHMsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lYm9hcmQ7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL1NoaXBcIjtcblxuY29uc3QgVUkgPSAoKCkgPT4ge1xuICBjb25zdCByZW5kZXJCb2FyZCA9IChwbGF5ZXJCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib2FyZFwiKTtcblxuICAgIHBsYXllckJvYXJkLmJvYXJkQXJyYXkuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgY29uc3Qgcm93RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHJvd0Rpdi5jbGFzc0xpc3QuYWRkKFwicm93RGl2XCIpO1xuXG4gICAgICByb3cuZm9yRWFjaCgoaXRlbSwgY2VsbEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJib2FyZENlbGxcIik7XG4gICAgICAgIGNlbGwuaWQgPSBgJHtyb3dJbmRleH0sJHtjZWxsSW5kZXh9YDtcbiAgICAgICAgaWYgKGl0ZW0gIT09IFwibm9uZVwiKSBjZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwQ2VsbFwiKTtcblxuICAgICAgICByb3dEaXYuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICB9KTtcblxuICAgICAgYm9hcmQuYXBwZW5kQ2hpbGQocm93RGl2KTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBhdHRlbXB0ID0gKGNvb3JkaW5hdGVzLCBnYW1lYm9hcmQpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7eH0sJHt5fWApO1xuICAgIGNvbnN0IGlzU2hpcCA9IGdhbWVib2FyZC5pc1NoaXAoY29vcmRpbmF0ZXMpO1xuXG4gICAgaWYgKGlzU2hpcCkge1xuICAgICAgdGFyZ2V0Q2VsbC5pbm5lckhUTUwgPSBcIkhpdFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRDZWxsLmlubmVySFRNTCA9IFwiTWlzc1wiO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4geyByZW5kZXJCb2FyZCwgYXR0ZW1wdCB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVUk7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vU2hpcFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi9VSVwiO1xuXG5jb25zdCBnYW1lID0gKCgpID0+IHtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBQbGF5ZXIoXCJjb21wdXRlclwiKTtcbiAgY29uc3QgdXNlclBsYXllciA9IFBsYXllcihcInVzZXJcIik7XG5cbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSB1c2VyUGxheWVyO1xuXG4gIGNvbnN0IGluaXRHYW1lID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiaW5pdFwiKTtcblxuICAgIGNvbnN0IHVzZXJCb2FyZCA9IHVzZXJQbGF5ZXIuYm9hcmQ7XG4gICAgY29uc3QgY29tcHV0ZXJCb2FyZCA9IGNvbXB1dGVyUGxheWVyLmJvYXJkO1xuICAgIGNvbXB1dGVyQm9hcmQuaW5pdEJvYXJkKCk7XG4gICAgdXNlckJvYXJkLmluaXRCb2FyZCgpO1xuICB9O1xuXG4gIGNvbnN0IHBsYXlSb3VuZCA9IChwbGF5ZXIsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgaWYgKHBsYXllciA9PT0gdXNlclBsYXllcikge1xuICAgICAgY29tcHV0ZXJQbGF5ZXIuYm9hcmQucmVjZWl2ZUF0dGFjayhbMiwgM10pO1xuICAgICAgVUkuYXR0ZW1wdChbMiwgM10sIGNvbXB1dGVyUGxheWVyLmJvYXJkKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3dpdGNoVHVybiA9ICgpID0+IHtcbiAgICBpZiAoY3VycmVudFBsYXllciA9PT0gdXNlclBsYXllcikge1xuICAgICAgY3VycmVudFBsYXllciA9IGNvbXB1dGVyUGxheWVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50UGxheWVyID0gdXNlclBsYXllcjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hlY2tXaW4gPSAoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tBcnJheSA9IGN1cnJlbnRQbGF5ZXIuYm9hcmQuc2hpcHM7XG5cbiAgICByZXR1cm4gY2hlY2tBcnJheS5ldmVyeSgoc2hpcCkgPT4ge1xuICAgICAgcmV0dXJuIHNoaXAuaXNTdW5rKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0R2FtZSxcbiAgICBwbGF5Um91bmQsXG4gICAgc3dpdGNoVHVybixcbiAgICBjb21wdXRlclBsYXllcixcbiAgICB1c2VyUGxheWVyLFxuICAgIGN1cnJlbnRQbGF5ZXIsXG4gICAgY2hlY2tXaW4sXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9tb2R1bGVzL0dhbWVib2FyZC5qc1wiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vbW9kdWxlcy9TaGlwLmpzXCI7XG5pbXBvcnQgZ2FtZSBmcm9tIFwiLi9tb2R1bGVzL2dhbWUuanNcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi9tb2R1bGVzL1VJLmpzXCI7XG5cbmdhbWUuaW5pdEdhbWUoKTtcblxuY29uc29sZS5sb2coXCJzdGFydFwiKTtcblVJLnJlbmRlckJvYXJkKGdhbWUuY29tcHV0ZXJQbGF5ZXIuYm9hcmQpO1xuXG5nYW1lLnBsYXlSb3VuZChnYW1lLmN1cnJlbnRQbGF5ZXIpO1xuIl0sIm5hbWVzIjpbInBhdGgiLCJoaXRzIiwiZ2V0TGVuZ3RoIiwiY291bnQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImlzU3VuayIsImhpdCIsImdldEhpdHMiLCJnZXRQYXRoIiwicmVzZXRIaXRzIiwidHlwZSIsImF0dGVtcHRzIiwiYm9hcmQiLCJib2FyZEFycmF5IiwiQXJyYXkiLCJtYXAiLCJlIiwiZmlsbCIsIm1pc3NlcyIsInNoaXBzIiwicGxhY2VTaGlwIiwic2hpcE9iamVjdCIsImNvb3JkaW5hdGVzIiwieCIsInkiLCJhZGRTaGlwIiwic2hpcCIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwiYWxyZWFkeUhpdCIsImFscmVhZHlNaXNzIiwic29tZSIsIml0ZW0iLCJ4SXRlbSIsInlJdGVtIiwicmVzZXRHYW1lYm9hcmQiLCJpbml0Qm9hcmQiLCJpc1NoaXAiLCJnZXRTaGlwIiwiYXR0ZW1wdCIsImdlbmVyYXRlTW92ZSIsImdldFJhbmRvbUludCIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNoZWNrQXR0ZW1wdGVkIiwiY29vcmRpbmF0ZSIsIm1vdmUiLCJwbGF5ZXJCb2FyZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyb3ciLCJyb3dJbmRleCIsInJvd0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjZWxsSW5kZXgiLCJjZWxsIiwiaWQiLCJhcHBlbmRDaGlsZCIsImdhbWVib2FyZCIsInRhcmdldENlbGwiLCJpbm5lckhUTUwiLCJjb21wdXRlclBsYXllciIsInVzZXJQbGF5ZXIiLCJjdXJyZW50UGxheWVyIiwiaW5pdEdhbWUiLCJjb25zb2xlIiwibG9nIiwidXNlckJvYXJkIiwicGxheVJvdW5kIiwicGxheWVyIiwic3dpdGNoVHVybiIsImNoZWNrV2luIiwiZXZlcnkiXSwic291cmNlUm9vdCI6IiJ9