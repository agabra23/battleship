(()=>{"use strict";const t=function(t){let e=0;const r=()=>{let e=0;return t.forEach((t=>{e++})),e};return{getLength:r,isSunk:()=>e>=r(),hit:()=>{e++},getHits:()=>e,getPath:()=>t,resetHits:()=>{e=0}}},e=function(){const e=[...Array(10)].map((t=>Array(10).fill("none"))),r=[],n=[];let o=[];const s=t=>{t.getPath().forEach((r=>{const[n,o]=r;e[n][o]=t})),a(t)},a=t=>{o.push(t)};return{placeShip:s,boardArray:e,receiveAttack:t=>{const[o,s]=t;let a,c=!1;a=r.some((e=>{const[r,n]=e;return r===t[0]&&n===t[1]})),c=n.some((e=>{const[r,n]=e;return r===t[0]&&n===t[1]})),"none"!==e[o][s]&&!1===a?(e[o][s].hit(),r.push(t)):"none"===e[o][s]&&!1===c&&n.push(t)},hits:r,misses:n,addShip:a,resetGameboard:()=>{r=[],n=[],o=[]},initBoard:()=>{s(t([[1,4],[1,5]])),s(t([[6,4],[6,5],[6,6]])),s(t([[4,2],[5,2],[6,2],[7,2]])),s(t([[4,2],[5,2],[6,2],[7,2]])),s(t([[8,3],[8,4],[8,5],[8,6],[8,7]])),s(t([[2,3],[2,4],[2,5],[2,6],[2,7]]))},isShip:t=>{const[r,n]=t;return"none"!==e[r][n]}}},r=t=>{const e=[],r=t=>{e.push(t)};return"computer"===t?{attempt:r,generateMove:()=>{const t=t=>Math.floor(Math.random()*t),r=t=>e.some((e=>{const[r,n]=e;return r===t[0]&&n===t[1]}));let n=[t(9),t(9)];for(;r(n);)n=[t(9),t(9)];return n}}:{attempt:r}},n=t=>{const e=document.getElementById("board");t.boardArray.forEach(((t,r)=>{const n=document.createElement("div");n.classList.add("rowDiv"),t.forEach(((t,e)=>{const o=document.createElement("div");o.classList.add("boardCell"),o.id=`${r},${e}`,"none"!==t&&o.classList.add("shipCell"),n.appendChild(o)})),e.appendChild(n)}))},o=(t,e)=>{const[r,n]=t,o=document.getElementById(`${r},${n}`),s=e.isShip(t);o.innerHTML=s?"Hit":"Miss"},s=(()=>{const t=r("computer"),n=e(),s=r("user"),a=e();return{initGame:()=>{console.log("init"),a.initBoard(),n.initBoard()},playRound:t=>{t===s&&(n.receiveAttack([2,3]),o([2,3],n))},computerBoard:n,computerPlayer:t,userBoard:a,userPlayer:s}})();s.initGame(),console.log("start"),n(s.computerBoard),s.playRound(s.userPlayer)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUcsR0FBSXdDLEdBQ3JCLEVBTUFBLGdCQUNBRCxpQkFDQUcsWUFDQUQsYUFFSCxFQTVCWSxHQ0NiLEVBQUtFLFdBRUxDLFFBQVFDLElBQUksU0FDWixFQUFlLEVBQUtMLGVBRXBCLEVBQUtNLFVBQVUsRUFBS0wsVyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9TaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9HYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvVUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgbGV0IGhpdHMgPSAwO1xuXG4gIGNvbnN0IGdldEhpdHMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGhpdHM7XG4gIH07XG5cbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIGhpdHMrKztcbiAgfTtcblxuICBjb25zdCBnZXRMZW5ndGggPSAoKSA9PiB7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBwYXRoLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvdW50Kys7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50O1xuICB9O1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICByZXR1cm4gaGl0cyA+PSBnZXRMZW5ndGgoKTtcbiAgfTtcblxuICBjb25zdCBnZXRQYXRoID0gKCkgPT4ge1xuICAgIHJldHVybiBwYXRoO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0SGl0cyA9ICgpID0+IHtcbiAgICBoaXRzID0gMDtcbiAgfTtcblxuICByZXR1cm4geyBnZXRMZW5ndGgsIGlzU3VuaywgaGl0LCBnZXRIaXRzLCBnZXRQYXRoLCByZXNldEhpdHMgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBTaGlwO1xuIiwiaW1wb3J0IFNoaXAgZnJvbSBcIi4vU2hpcC5qc1wiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJvYXJkQXJyYXkgPSBbLi4uQXJyYXkoMTApXS5tYXAoKGUpID0+IEFycmF5KDEwKS5maWxsKFwibm9uZVwiKSk7XG4gIGNvbnN0IGhpdHMgPSBbXTtcbiAgY29uc3QgbWlzc2VzID0gW107XG4gIGxldCBzaGlwcyA9IFtdO1xuXG4gIGNvbnN0IGluaXRCb2FyZCA9ICgpID0+IHtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzEsIDRdLFxuICAgICAgICBbMSwgNV0sXG4gICAgICBdKVxuICAgICk7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFs2LCA0XSxcbiAgICAgICAgWzYsIDVdLFxuICAgICAgICBbNiwgNl0sXG4gICAgICBdKVxuICAgICk7XG4gICAgcGxhY2VTaGlwKFxuICAgICAgU2hpcChbXG4gICAgICAgIFs0LCAyXSxcbiAgICAgICAgWzUsIDJdLFxuICAgICAgICBbNiwgMl0sXG4gICAgICAgIFs3LCAyXSxcbiAgICAgIF0pXG4gICAgKTtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzQsIDJdLFxuICAgICAgICBbNSwgMl0sXG4gICAgICAgIFs2LCAyXSxcbiAgICAgICAgWzcsIDJdLFxuICAgICAgXSlcbiAgICApO1xuICAgIHBsYWNlU2hpcChcbiAgICAgIFNoaXAoW1xuICAgICAgICBbOCwgM10sXG4gICAgICAgIFs4LCA0XSxcbiAgICAgICAgWzgsIDVdLFxuICAgICAgICBbOCwgNl0sXG4gICAgICAgIFs4LCA3XSxcbiAgICAgIF0pXG4gICAgKTtcbiAgICBwbGFjZVNoaXAoXG4gICAgICBTaGlwKFtcbiAgICAgICAgWzIsIDNdLFxuICAgICAgICBbMiwgNF0sXG4gICAgICAgIFsyLCA1XSxcbiAgICAgICAgWzIsIDZdLFxuICAgICAgICBbMiwgN10sXG4gICAgICBdKVxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgcmVzZXRHYW1lYm9hcmQgPSAoKSA9PiB7XG4gICAgaGl0cyA9IFtdO1xuICAgIG1pc3NlcyA9IFtdO1xuICAgIHNoaXBzID0gW107XG4gIH07XG5cbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXBPYmplY3QpID0+IHtcbiAgICBjb25zdCBwYXRoID0gc2hpcE9iamVjdC5nZXRQYXRoKCk7XG4gICAgcGF0aC5mb3JFYWNoKChjb29yZGluYXRlcykgPT4ge1xuICAgICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG4gICAgICBib2FyZEFycmF5W3hdW3ldID0gc2hpcE9iamVjdDtcbiAgICB9KTtcbiAgICBhZGRTaGlwKHNoaXBPYmplY3QpO1xuICB9O1xuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcblxuICAgIGxldCBhbHJlYWR5SGl0LFxuICAgICAgYWxyZWFkeU1pc3MgPSBmYWxzZTtcblxuICAgIGFscmVhZHlIaXQgPSBoaXRzLnNvbWUoKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IFt4SXRlbSwgeUl0ZW1dID0gaXRlbTtcbiAgICAgIHJldHVybiB4SXRlbSA9PT0gY29vcmRpbmF0ZXNbMF0gJiYgeUl0ZW0gPT09IGNvb3JkaW5hdGVzWzFdO1xuICAgIH0pO1xuICAgIGFscmVhZHlNaXNzID0gbWlzc2VzLnNvbWUoKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IFt4SXRlbSwgeUl0ZW1dID0gaXRlbTtcbiAgICAgIHJldHVybiB4SXRlbSA9PT0gY29vcmRpbmF0ZXNbMF0gJiYgeUl0ZW0gPT09IGNvb3JkaW5hdGVzWzFdO1xuICAgIH0pO1xuXG4gICAgaWYgKGJvYXJkQXJyYXlbeF1beV0gIT09IFwibm9uZVwiICYmIGFscmVhZHlIaXQgPT09IGZhbHNlKSB7XG4gICAgICBib2FyZEFycmF5W3hdW3ldLmhpdCgpO1xuICAgICAgaGl0cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICB9IGVsc2UgaWYgKGJvYXJkQXJyYXlbeF1beV0gPT09IFwibm9uZVwiICYmIGFscmVhZHlNaXNzID09PSBmYWxzZSkge1xuICAgICAgbWlzc2VzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBhZGRTaGlwID0gKHNoaXApID0+IHtcbiAgICBzaGlwcy5wdXNoKHNoaXApO1xuICB9O1xuXG4gIGNvbnN0IGlzU2hpcCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IFt4LCB5XSA9IGNvb3JkaW5hdGVzO1xuXG4gICAgcmV0dXJuIGJvYXJkQXJyYXlbeF1beV0gIT09IFwibm9uZVwiO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcGxhY2VTaGlwLFxuICAgIGJvYXJkQXJyYXksXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBoaXRzLFxuICAgIG1pc3NlcyxcbiAgICBhZGRTaGlwLFxuICAgIHJlc2V0R2FtZWJvYXJkLFxuICAgIGluaXRCb2FyZCxcbiAgICBpc1NoaXAsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lYm9hcmQ7XG4iLCJjb25zdCBQbGF5ZXIgPSAodHlwZSkgPT4ge1xuICBjb25zdCBhdHRlbXB0cyA9IFtdO1xuICBjb25zdCB0dXJuID0gZmFsc2U7XG5cbiAgY29uc3QgYXR0ZW1wdCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGF0dGVtcHRzLnB1c2goY29vcmRpbmF0ZXMpO1xuICB9O1xuXG4gIGNvbnN0IGdlbmVyYXRlTW92ZSA9ICgpID0+IHtcbiAgICBjb25zdCBnZXRSYW5kb21JbnQgPSAobWF4KSA9PiB7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2hlY2tBdHRlbXB0ZWQgPSAoYXR0ZW1wdCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXR0ZW1wdHMuc29tZSgoY29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlO1xuXG4gICAgICAgIHJldHVybiB4ID09PSBhdHRlbXB0WzBdICYmIHkgPT09IGF0dGVtcHRbMV07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgbGV0IG1vdmUgPSBbZ2V0UmFuZG9tSW50KDkpLCBnZXRSYW5kb21JbnQoOSldO1xuXG4gICAgd2hpbGUgKGNoZWNrQXR0ZW1wdGVkKG1vdmUpKSB7XG4gICAgICBtb3ZlID0gW2dldFJhbmRvbUludCg5KSwgZ2V0UmFuZG9tSW50KDkpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbW92ZTtcbiAgfTtcblxuICBpZiAodHlwZSA9PT0gXCJjb21wdXRlclwiKSByZXR1cm4geyBhdHRlbXB0LCBnZW5lcmF0ZU1vdmUgfTtcblxuICByZXR1cm4geyBhdHRlbXB0IH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL1NoaXBcIjtcblxuY29uc3QgVUkgPSAoKCkgPT4ge1xuICBjb25zdCByZW5kZXJCb2FyZCA9IChwbGF5ZXJCb2FyZCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib2FyZFwiKTtcblxuICAgIHBsYXllckJvYXJkLmJvYXJkQXJyYXkuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgY29uc3Qgcm93RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHJvd0Rpdi5jbGFzc0xpc3QuYWRkKFwicm93RGl2XCIpO1xuXG4gICAgICByb3cuZm9yRWFjaCgoaXRlbSwgY2VsbEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJib2FyZENlbGxcIik7XG4gICAgICAgIGNlbGwuaWQgPSBgJHtyb3dJbmRleH0sJHtjZWxsSW5kZXh9YDtcbiAgICAgICAgaWYgKGl0ZW0gIT09IFwibm9uZVwiKSBjZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwQ2VsbFwiKTtcblxuICAgICAgICByb3dEaXYuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICB9KTtcblxuICAgICAgYm9hcmQuYXBwZW5kQ2hpbGQocm93RGl2KTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBhdHRlbXB0ID0gKGNvb3JkaW5hdGVzLCBnYW1lYm9hcmQpID0+IHtcbiAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7eH0sJHt5fWApO1xuICAgIGNvbnN0IGlzU2hpcCA9IGdhbWVib2FyZC5pc1NoaXAoY29vcmRpbmF0ZXMpO1xuXG4gICAgaWYgKGlzU2hpcCkge1xuICAgICAgdGFyZ2V0Q2VsbC5pbm5lckhUTUwgPSBcIkhpdFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRDZWxsLmlubmVySFRNTCA9IFwiTWlzc1wiO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4geyByZW5kZXJCb2FyZCwgYXR0ZW1wdCB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVUk7XG4iLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiO1xuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi9VSVwiO1xuXG5jb25zdCBnYW1lID0gKCgpID0+IHtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBQbGF5ZXIoXCJjb21wdXRlclwiKTtcbiAgY29uc3QgY29tcHV0ZXJCb2FyZCA9IEdhbWVib2FyZCgpO1xuXG4gIGNvbnN0IHVzZXJQbGF5ZXIgPSBQbGF5ZXIoXCJ1c2VyXCIpO1xuICBjb25zdCB1c2VyQm9hcmQgPSBHYW1lYm9hcmQoKTtcblxuICBjb25zdCBpbml0R2FtZSA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcImluaXRcIik7XG4gICAgdXNlckJvYXJkLmluaXRCb2FyZCgpO1xuICAgIGNvbXB1dGVyQm9hcmQuaW5pdEJvYXJkKCk7XG4gIH07XG5cbiAgY29uc3QgcGxheVJvdW5kID0gKHBsYXllcikgPT4ge1xuICAgIGlmIChwbGF5ZXIgPT09IHVzZXJQbGF5ZXIpIHtcbiAgICAgIGNvbXB1dGVyQm9hcmQucmVjZWl2ZUF0dGFjayhbMiwgM10pO1xuICAgICAgVUkuYXR0ZW1wdChbMiwgM10sIGNvbXB1dGVyQm9hcmQpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXRHYW1lLFxuICAgIHBsYXlSb3VuZCxcbiAgICBjb21wdXRlckJvYXJkLFxuICAgIGNvbXB1dGVyUGxheWVyLFxuICAgIHVzZXJCb2FyZCxcbiAgICB1c2VyUGxheWVyLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZTtcbiIsImltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vbW9kdWxlcy9HYW1lYm9hcmQuanNcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL21vZHVsZXMvU2hpcC5qc1wiO1xuaW1wb3J0IGdhbWUgZnJvbSBcIi4vbW9kdWxlcy9nYW1lLmpzXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4vbW9kdWxlcy9VSS5qc1wiO1xuXG5nYW1lLmluaXRHYW1lKCk7XG5cbmNvbnNvbGUubG9nKFwic3RhcnRcIik7XG5VSS5yZW5kZXJCb2FyZChnYW1lLmNvbXB1dGVyQm9hcmQpO1xuXG5nYW1lLnBsYXlSb3VuZChnYW1lLnVzZXJQbGF5ZXIpO1xuIl0sIm5hbWVzIjpbInBhdGgiLCJoaXRzIiwiZ2V0TGVuZ3RoIiwiY291bnQiLCJmb3JFYWNoIiwiZWxlbWVudCIsImlzU3VuayIsImhpdCIsImdldEhpdHMiLCJnZXRQYXRoIiwicmVzZXRIaXRzIiwiYm9hcmRBcnJheSIsIkFycmF5IiwibWFwIiwiZSIsImZpbGwiLCJtaXNzZXMiLCJzaGlwcyIsInBsYWNlU2hpcCIsInNoaXBPYmplY3QiLCJjb29yZGluYXRlcyIsIngiLCJ5IiwiYWRkU2hpcCIsInNoaXAiLCJwdXNoIiwicmVjZWl2ZUF0dGFjayIsImFscmVhZHlIaXQiLCJhbHJlYWR5TWlzcyIsInNvbWUiLCJpdGVtIiwieEl0ZW0iLCJ5SXRlbSIsInJlc2V0R2FtZWJvYXJkIiwiaW5pdEJvYXJkIiwiaXNTaGlwIiwidHlwZSIsImF0dGVtcHRzIiwiYXR0ZW1wdCIsImdlbmVyYXRlTW92ZSIsImdldFJhbmRvbUludCIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNoZWNrQXR0ZW1wdGVkIiwiY29vcmRpbmF0ZSIsIm1vdmUiLCJwbGF5ZXJCb2FyZCIsImJvYXJkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJvdyIsInJvd0luZGV4Iiwicm93RGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNlbGxJbmRleCIsImNlbGwiLCJpZCIsImFwcGVuZENoaWxkIiwiZ2FtZWJvYXJkIiwidGFyZ2V0Q2VsbCIsImlubmVySFRNTCIsImNvbXB1dGVyUGxheWVyIiwiY29tcHV0ZXJCb2FyZCIsInVzZXJQbGF5ZXIiLCJ1c2VyQm9hcmQiLCJpbml0R2FtZSIsImNvbnNvbGUiLCJsb2ciLCJwbGF5Um91bmQiLCJwbGF5ZXIiXSwic291cmNlUm9vdCI6IiJ9